<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div class="beta">beta</div><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item active"><a href="/docs/get_started">get started</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/developer_guide">developer guide</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/api">api</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/packages">packages</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/migration">migration</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div><div class="docs-icons"><a href="https://github.com/cerebral/cerebral" class="docs-icon" target="_new"><div class="docs-icon-github"></div>github repo</a><a href="https://discord.gg/0kIweV4bd2bwwsvH" class="docs-icon" target="_new"><div class="docs-icon-discord"></div>chat</a><a href="http://cerebral-website.herokuapp.com/" class="docs-icon" target="_new" style="color:#DD4A68;">old website</a></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger"></div><div class="docs-navigation-title mobile">get started</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item active mobile"><a href="/docs/get_started">get started</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/get_started/index.html">Cerebral</a></li><li><a href="/docs/get_started/the_architecture.html">The architecture</a></li><li><a href="/docs/get_started/debugger.html">Debugger</a></li><li><a href="/docs/get_started/resources.html">Resources</a></li><li><a href="/docs/get_started/counter.html">Example: Counter</a></li><li class="active"><a href="/docs/get_started/todomvc.html">Example: TodoMVC</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/developer_guide">developer guide</a></li><li class="docs-navigation-item mobile"><a href="/docs/api">api</a></li><li class="docs-navigation-item mobile"><a href="/docs/packages">packages</a></li><li class="docs-navigation-item mobile"><a href="/docs/migration">migration</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/get_started/index.html">Cerebral</a></li><li><a href="/docs/get_started/the_architecture.html">The architecture</a></li><li><a href="/docs/get_started/debugger.html">Debugger</a></li><li><a href="/docs/get_started/resources.html">Resources</a></li><li><a href="/docs/get_started/counter.html">Example: Counter</a></li><li class="active"><a href="/docs/get_started/todomvc.html">Example: TodoMVC</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/get_started/todomvc.md" target="_new">Edit on Github</a></div><h1 id="example:-todomvc">Example: TodoMVC</h1><p>This example only shows a commented version of the controller. Please go to <a href="https://github.com/cerebral/cerebral/tree/master/demos/todomvc" target="new">TodoMVC repo</a> to see complete source code.</p><pre><code class="language-js">import {Controller} from &#x27;cerebral&#x27;
import Devtools from &#x27;cerebral/devtools&#x27;
import {ContextProvider} from &#x27;cerebral/providers&#x27;
import uuid from &#x27;uuid&#x27;
import Router, {redirect} from &#x27;cerebral-router&#x27;
// Providers
import StorageProvider from &#x27;cerebral-provider-storage&#x27;
// Operators
import {set, toggle, unset, when} from &#x27;cerebral/operators&#x27;
import {props, state} from &#x27;cerebral/tags&#x27;
// Actions
import addTodo from &#x27;./actions/addTodo&#x27;
import toggleAllChecked from &#x27;./actions/toggleAllChecked&#x27;
import clearCompletedTodos from &#x27;./actions/clearCompletedTodos&#x27;

const controller = Controller({
  devtools: Devtools({ remoteDebugger: &#x27;localhost:8787&#x27; }),
  // The router maps urls to signal execution
  router: Router({
    onlyHash: true,
    routes: {
      &#x27;/&#x27;: &#x27;rootRouted&#x27;,
      &#x27;/:filter&#x27;: &#x27;filterClicked&#x27;
    }
  }),
  // Providing side effects to the signal execution. ContextProvider
  // is a simple way to inject any library
  providers: [
    StorageProvider({
      sync: {todos: &#x27;todos&#x27;},
      prefix: &#x27;todomvc&#x27;
    }),
    ContextProvider({uuid})
  ],
  // Initial state
  state: {
    newTodoTitle: &#x27;&#x27;,
    todos: window.localStorage.getItem(&#x27;todomvc.todos&#x27;) ? JSON.parse(window.localStorage.getItem(&#x27;todomvc.todos&#x27;)) : {},
    filter: &#x27;all&#x27;,
    editingUid: null
  },
  // Most of the logic of TodoMVC can be expressed with operators
  signals: {
    rootRouted: redirect(&#x27;/all&#x27;),
    newTodoTitleChanged: set(state`newTodoTitle`, props`title`),
    newTodoSubmitted: [
      when(state`newTodoTitle`), {
        true: [
          addTodo,
          set(state`newTodoTitle`, &#x27;&#x27;)
        ],
        false: []
      }
    ],
    todoNewTitleChanged: set(state`todos.${props`uid`}.editedTitle`, props`title`),
    todoNewTitleSubmitted: [
      when(state`todos.${props`uid`}.editedTitle`), {
        true: [
          set(state`todos.${props`uid`}.title`, state`todos.${props`uid`}.editedTitle`),
          unset(state`todos.${props`uid`}.editedTitle`),
          set(state`editingUid`, null)
        ],
        false: []
      }
    ],
    removeTodoClicked: [
      unset(state`todos.${props`uid`}`)
    ],
    todoDoubleClicked: [
      set(state`todos.${props`uid`}.editedTitle`, state`todos.${props`uid`}.title`),
      set(state`editingUid`, props`uid`)
    ],
    toggleAllChanged: [
      toggleAllChecked
    ],
    toggleTodoCompletedChanged: [
      toggle(state`todos.${props`uid`}.completed`)
    ],
    todoNewTitleAborted: [
      unset(state`todos.${props`uid`}.editedTitle`),
      set(state`editingUid`, null)
    ],
    clearCompletedClicked: [
      clearCompletedTodos
    ],
    filterClicked: set(state`filter`, props`filter`)
  }
})

export default controller</code></pre></div></div></div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
