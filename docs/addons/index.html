<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div class="beta">beta</div><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item"><a href="/docs/introduction">introduction</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/api">api</a><div class="underline"></div></li><li class="docs-navigation-item active"><a href="/docs/addons">addons</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/resources">resources</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div><div class="docs-icons"><a href="https://github.com/cerebral/cerebral" class="docs-icon" target="_new"><div class="docs-icon-github"></div>github repo</a><a href="https://discord.gg/0kIweV4bd2bwwsvH" class="docs-icon" target="_new"><div class="docs-icon-discord"></div>chat</a><a href="http://cerebral-website.herokuapp.com/" class="docs-icon" target="_new" style="color:#DD4A68;">old website</a></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger"></div><div class="docs-navigation-title mobile">addons</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item mobile"><a href="/docs/introduction">introduction</a></li><li class="docs-navigation-item mobile"><a href="/docs/api">api</a></li><li class="docs-navigation-item active mobile"><a href="/docs/addons">addons</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li class="active"><a href="/docs/addons/index.html">@cerebral/router</a><ul><li><a href="#install">Install</a></li><li><a href="#description">Description</a></li><li><a href="#api">API</a><ul><li><a href="#instantiate">instantiate</a></li><li><a href="#routes">routes</a></li><li><a href="#geturl">getUrl</a></li><li><a href="#geturlbase">getUrlBase</a></li><li><a href="#geturlquery">getUrlQuery</a></li><li><a href="#goto">goTo</a></li><li><a href="#redirect">redirect</a></li><li><a href="#reload">reload</a></li><li><a href="#redirecttosignal">redirectToSignal</a></li><li><a href="#experimental">EXPERIMENTAL</a><ul><li><a href="#mapping">mapping</a></li><li><a href="#computed-mapping">computed mapping</a></li></ul></li></ul></li></ul></li><li><a href="/docs/addons/http.html">@cerebral/http</a></li><li><a href="/docs/addons/firebase.html">@cerebral/firebase</a></li><li><a href="/docs/addons/useragent.html">@cerebral/useragent</a></li><li><a href="/docs/addons/forms.html">@cerebral/forms</a></li><li><a href="/docs/addons/storage.html">@cerebral/storage</a></li><li><a href="/docs/addons/firebase_admin.html">@cerebral/firebase-admin</a></li><li><a href="/docs/addons/function_tree.html">function-tree</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/resources">resources</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li class="active"><a href="/docs/addons/index.html">@cerebral/router</a><ul><li><a href="#install">Install</a></li><li><a href="#description">Description</a></li><li><a href="#api">API</a><ul><li><a href="#instantiate">instantiate</a></li><li><a href="#routes">routes</a></li><li><a href="#geturl">getUrl</a></li><li><a href="#geturlbase">getUrlBase</a></li><li><a href="#geturlquery">getUrlQuery</a></li><li><a href="#goto">goTo</a></li><li><a href="#redirect">redirect</a></li><li><a href="#reload">reload</a></li><li><a href="#redirecttosignal">redirectToSignal</a></li><li><a href="#experimental">EXPERIMENTAL</a><ul><li><a href="#mapping">mapping</a></li><li><a href="#computed-mapping">computed mapping</a></li></ul></li></ul></li></ul></li><li><a href="/docs/addons/http.html">@cerebral/http</a></li><li><a href="/docs/addons/firebase.html">@cerebral/firebase</a></li><li><a href="/docs/addons/useragent.html">@cerebral/useragent</a></li><li><a href="/docs/addons/forms.html">@cerebral/forms</a></li><li><a href="/docs/addons/storage.html">@cerebral/storage</a></li><li><a href="/docs/addons/firebase_admin.html">@cerebral/firebase-admin</a></li><li><a href="/docs/addons/function_tree.html">function-tree</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/../../node_modules/@cerebral/router/README.md" target="_new">Edit on Github</a></div><h1>@cerebral/router</h1><h2>Install</h2><p><strong>NPM</strong></p><p><code>npm install @cerebral/router --save</code></p><p><strong>YARN</strong></p><p><code>yarn add @cerebral/router</code></p><h2>Description</h2><p>The router of Cerebral does not affect your view layer. A url change triggers a signal that puts your application in the correct state. Your view just reacts to this state, like any other state change.</p><h2>API</h2><h3>instantiate</h3><pre class="language-js"><code class="language-js">import {Controller} from &#x27;cerebral&#x27;
import Router from &#x27;@cerebral/router&#x27;

const controller = Controller({
  modules: {
    router: Router({
      // Define routes and point to signals
      routes: [{
        path: &#x27;/&#x27;,
        signal: &#x27;app.homeRouted&#x27;
      }]

      // Only react to hash urls
      onlyHash: false,

      // Set a base url, if your app lives on a subpath
      baseUrl: null,

      // Will allow none matching routes on same origin to run as normal
      allowEscape: false,

      // Will make the router not run the initial route
      preventAutostart: false
    })
  }
})</code></pre><h3>routes</h3><pre class="language-js"><code class="language-js">import {Controller} from &#x27;cerebral&#x27;
import Router from &#x27;@cerebral/router&#x27;

const controller = Controller({
  modules: {
    router: Router({
      routes: [
        {
          path: &#x27;/&#x27;,
          signal: &#x27;app.homeRouted&#x27;
        },
        {
          // Params are passed as props to the signal.
          // Query parameters are also passed as props
          path: &#x27;/projects/:projectId&#x27;,
          signal: &#x27;app.projectRouted&#x27;,
        }
      ]
    })
  }
})</code></pre><p>When a mapped signal triggers it will trigger with a payload if either <strong>params</strong> are defined on the route or the url has a <strong>query</strong>. For example <em>/projects/123?showUser=true</em> will produce the following payload to the signal, available on the <strong>props</strong> :</p><pre class="language-js"><code class="language-js">{
  projectId: &#x27;123&#x27;,
  showUser: true
}</code></pre><h3>getUrl</h3><pre class="language-js"><code class="language-js">function myAction({router}) {
  // If url is &quot;http://localhost:3000/items?foo=bar&quot;, returns &quot;/items?foo=bar&quot;
  router.getUrl()
}</code></pre><h3>getUrlBase</h3><pre class="language-js"><code class="language-js">function myAction({router}) {
  // If url is &quot;http://localhost:3000/items?foo=bar&quot;, returns &quot;/items&quot;
  router.getUrlBase()
}</code></pre><h3>getUrlQuery</h3><pre class="language-js"><code class="language-js">function myAction({router}) {
  // If url is &quot;http://localhost:3000/items?foo=bar&quot;, returns &quot;foo=bar&quot;
  router.getUrlQuery()
}</code></pre><h3>goTo</h3><p><em>action</em></p><pre class="language-js"><code class="language-js">function myAction({router}) {
  // Go to a new url
  router.goTo(&#x27;/items&#x27;)
}</code></pre><p><em>factory</em></p><pre class="language-js"><code class="language-js">import {goTo} from &#x27;@cerebral/router/operators&#x27;

export default [
  goTo(&#x27;/items&#x27;)
]</code></pre><h3>redirect</h3><p><em>action</em></p><pre class="language-js"><code class="language-js">function myAction({router}) {
  // Go to a new url, replacing current url
  router.redirect(&#x27;/items&#x27;)
}</code></pre><p><em>factory</em></p><pre class="language-js"><code class="language-js">import {redirect} from &#x27;@cerebral/router/operators&#x27;

export default [
  redirect(&#x27;/items&#x27;)
]</code></pre><h3>reload</h3><p><em>action</em></p><pre class="language-js"><code class="language-js">function myAction({router}) {
  router.reload()
}</code></pre><p><em>factory</em></p><pre class="language-js"><code class="language-js">import {reload} from &#x27;@cerebral/router/operators&#x27;

export default [
  reload
]</code></pre><h3>redirectToSignal</h3><p><em>action</em></p><pre class="language-js"><code class="language-js">function myAction({router}) {
  // Trigger a signal bound to router
  router.redirectToSignal(&#x27;app.itemsRouted&#x27;, {foo: &#x27;bar&#x27;})
}</code></pre><p><em>factory</em></p><pre class="language-js"><code class="language-js">import {redirectToSignal} from &#x27;@cerebral/router/operators&#x27;

export default [
  redirectToSignal(&#x27;app.itemsRouted&#x27;, props`payload`)
]</code></pre><h3>EXPERIMENTAL</h3><p>We are currently working on functionality that allows you to bind urls to your state, also allowing you to create more complex relationships between your application state and the url. This API is very likely to change, but please feel free to try it out and give us feedback.</p><h4>mapping</h4><p>The <code>map</code> property let’s you create a mapping between state and
url parameters. This works both ways: when you change the state,
it sets the url from state and when the url changes, it triggers
the state changes.</p><p>This automatic mapping is only active if the current url
is active. Note also that when you use state mapping, the ‘signal’
is optional.</p><pre class="language-js"><code class="language-js">import {Controller} from &#x27;cerebral&#x27;
import Router from &#x27;@cerebral/router&#x27;

const controller = Controller({
  modules: {
    router: Router({
      routes: [
        {
          path: &#x27;/projects/:projectId&#x27;,
          map: {projectId: state`app.currentProjectId`},
          signal: &#x27;app.projectRouted&#x27;,
        },
        {
          path: &#x27;/settings/:tab&#x27;,
          // whitelist &#x27;focus&#x27; query parameter
          // and &#x27;tab&#x27; url parameter
          map: {tab: props`tab`, focus: props`focus`},
          signal: &#x27;app.settingsRouted&#x27;,
        }
      ]
    })
  }
})</code></pre><h4>computed mapping</h4><p>You can use a <code>compute</code> value here to run a computed in order to prepare
the value passed to build the url.</p><pre class="language-js"><code class="language-js">map: {
  urlKey: compute(/* ... */)
}</code></pre><p>If you use a <code>compute</code> the router cannot map back from the url key to the
state and you need to define a reverse map with <code>rmap</code>:</p><pre class="language-js"><code class="language-js">rmap: {
  &#x27;some.state&#x27;: compute(props`urlKey`, (urlKey) =&gt; /* ... */),
  &#x27;other.state&#x27;: compute(props`urlKey`, (urlKey) =&gt; /* ... */)
}</code></pre><pre class="language-js"><code class="language-js">import {Controller} from &#x27;cerebral&#x27;
import Router from &#x27;@cerebral/router&#x27;
import {props, state} from &#x27;cerebral/tags&#x27;

const controller = Controller({
  modules: {
    router: Router({
      routes: [
        {
          path: &#x27;/settings/:tab&#x27;,
          // This maps a complex app state to the `opts` param in
          // url query.
          map: {
            opts: compute(
              state`projectId`,
              state`user.lang`,
              (projectId, lang) =&gt; ({projectId, lang})
            )
          },
          // This parses the url query `opts` into two state values.
          // It does a &#x27;reverse map&#x27; hence the &#x27;rmap&#x27; name.
          rmap: {
            &#x27;projectId&#x27;: compute(
              state`projectId`,
              props`opts`,
              (projectId, opts) =&gt; opts.projectId || projectId
            ),
            &#x27;user.lang&#x27;: compute(
              state`validLangs`,
              props`opts`,
              (validLangs, opts) =&gt; (
                validLangs[opts.lang] ? opts.lang : &#x27;en&#x27;
              )
            )
          }
        }
      ],
      query: true
    })
  }
})</code></pre></div></div></div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
