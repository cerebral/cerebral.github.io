<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div class="beta">beta</div><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item"><a href="/docs/get_started">get started</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/developer_guide">developer guide</a><div class="underline"></div></li><li class="docs-navigation-item active"><a href="/docs/api">api</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/packages">packages</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/migration">migration</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div><div class="docs-icons"><a href="https://github.com/cerebral/cerebral" class="docs-icon" target="_new"><div class="docs-icon-github"></div>github repo</a><a href="https://discord.gg/0kIweV4bd2bwwsvH" class="docs-icon" target="_new"><div class="docs-icon-discord"></div>chat</a><a href="http://cerebral-website.herokuapp.com/" class="docs-icon" target="_new" style="color:#DD4A68;">old website</a></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger"></div><div class="docs-navigation-title mobile">api</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item mobile"><a href="/docs/get_started">get started</a></li><li class="docs-navigation-item mobile"><a href="/docs/developer_guide">developer guide</a></li><li class="docs-navigation-item active mobile"><a href="/docs/api">api</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/api/index.html">Controller</a></li><li><a href="/docs/api/action.html">Action</a></li><li><a href="/docs/api/signal.html">Signal</a></li><li><a href="/docs/api/devtools.html">Devtools</a></li><li><a href="/docs/api/state.html">State</a></li><li><a href="/docs/api/tags.html">Tags</a></li><li><a href="/docs/api/container.html">Container</a></li><li><a href="/docs/api/connect.html">Connect</a></li><li><a href="/docs/api/modules.html">Modules</a></li><li class="active"><a href="/docs/api/operators.html">Operators</a><ul><li><a href="#state-operators">State operators</a><ul><li><a href="#concat">concat</a></li><li><a href="#merge">merge</a></li><li><a href="#pop">pop</a></li><li><a href="#push">push</a></li><li><a href="#set">set</a></li><li><a href="#shift">shift</a></li><li><a href="#splice">splice</a></li><li><a href="#toggle">toggle</a></li><li><a href="#unset">unset</a></li><li><a href="#unshift">unshift</a></li></ul></li><li><a href="#flow-control-operators">Flow control operators</a><ul><li><a href="#equals">equals</a></li><li><a href="#debounce">debounce</a></li><li><a href="#wait">wait</a></li><li><a href="#when">when</a></li></ul></li></ul></li><li><a href="/docs/api/providers.html">Providers</a></li><li><a href="/docs/api/compute.html">Compute</a></li><li><a href="/docs/api/statecontainer.html">StateContainer</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/packages">packages</a></li><li class="docs-navigation-item mobile"><a href="/docs/migration">migration</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/api/index.html">Controller</a></li><li><a href="/docs/api/action.html">Action</a></li><li><a href="/docs/api/signal.html">Signal</a></li><li><a href="/docs/api/devtools.html">Devtools</a></li><li><a href="/docs/api/state.html">State</a></li><li><a href="/docs/api/tags.html">Tags</a></li><li><a href="/docs/api/container.html">Container</a></li><li><a href="/docs/api/connect.html">Connect</a></li><li><a href="/docs/api/modules.html">Modules</a></li><li class="active"><a href="/docs/api/operators.html">Operators</a><ul><li><a href="#state-operators">State operators</a><ul><li><a href="#concat">concat</a></li><li><a href="#merge">merge</a></li><li><a href="#pop">pop</a></li><li><a href="#push">push</a></li><li><a href="#set">set</a></li><li><a href="#shift">shift</a></li><li><a href="#splice">splice</a></li><li><a href="#toggle">toggle</a></li><li><a href="#unset">unset</a></li><li><a href="#unshift">unshift</a></li></ul></li><li><a href="#flow-control-operators">Flow control operators</a><ul><li><a href="#equals">equals</a></li><li><a href="#debounce">debounce</a></li><li><a href="#wait">wait</a></li><li><a href="#when">when</a></li></ul></li></ul></li><li><a href="/docs/api/providers.html">Providers</a></li><li><a href="/docs/api/compute.html">Compute</a></li><li><a href="/docs/api/statecontainer.html">StateContainer</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/api/operators.md" target="_new">Edit on Github</a></div><h1 id="operators">Operators</h1><p>You can call operators to create actions for you. These actions will help you change state and control the flow of execution.</p><h2 id="state-operators">State operators</h2><p>The methods for changing state within actions is also available as operators. All state operators support using both <strong>state</strong> and <strong>props</strong> tags as values.</p><p>All operators are imported as members of the ‘cerebral/operators’ module. For example, this imports <strong>state</strong> and <strong>set</strong>:</p><pre><code class="language-js">import {set} from &#x27;cerebral/operators&#x27;
import {state} from &#x27;cerebral/tags&#x27;</code></pre><h3 id="concat">concat</h3><p>Concatenate a value to an array</p><pre><code class="language-js">concat(state`some.list`, [&#x27;foo&#x27;, &#x27;bar&#x27;])</code></pre><h3 id="merge">merge</h3><p>Merge objects into existing value. If no value exists, an empty object will be created. Merge supports using operator tags on key values:</p><pre><code class="language-js">merge(state`clients.$draft`, props`newDraft`, {
  foo: &#x27;bar&#x27;,
  bar: props`baz`
})</code></pre><h3 id="pop">pop</h3><p>Pop a value off an array (removes last element from array).</p><pre><code class="language-js">pop(state`some.list`)</code></pre><h3 id="push">push</h3><p>Push value into an array (adds the element at the end of the array).</p><pre><code class="language-js">push(state`some.list`, &#x27;foo&#x27;)</code></pre><h3 id="set">set</h3><p>Set a target value in the state or props.</p><pre><code class="language-js">set(state`foo.bar`, true),
set(props`foo`, true)</code></pre><h3 id="shift">shift</h3><p>Shift a value off an array (removes first element in array).</p><pre><code class="language-js">shift(state`some.list`),</code></pre><h3 id="splice">splice</h3><p>Splice an array in place.</p><pre><code class="language-js">splice(state`some.list`, 0, 2)</code></pre><h3 id="toggle">toggle</h3><p>Toggle a boolean value.</p><pre><code class="language-js">toggle(state`user.$toolbar`)</code></pre><h3 id="unset">unset</h3><p>Unset key from object.</p><pre><code class="language-js">unset(state`clients.all.${props`key`}`)</code></pre><h3 id="unshift">unshift</h3><p>Unshift a value into an array (adds the element at the start of the array).</p><pre><code class="language-js">unshift(state`some.list`, &#x27;foo&#x27;)</code></pre><h2 id="flow-control-operators">Flow control operators</h2><p>These operators help control the execution flow.</p><h3 id="equals">equals</h3><p>This operator chooses a specific path based on the provided value.</p><pre><code class="language-js">import {equals} from &#x27;cerebral/operators&#x27;
import {state} from &#x27;cerebral/tags&#x27;

export default [
  equals(state`user.role`), {
    admin: [],
    user: [],
    otherwise: [] // When no match
  }
],</code></pre><h3 id="debounce">debounce</h3><p>Hold action until the given amount of time in milliseconds has passed. If the
signal triggers again within this time frame, the previous signal goes down the
“discard” path while the new signal holds for the given time. This is
typically used for typeahead functionality. For a debounce that is shared
across different signals, you can use <code>debounce.shared()</code> (see example below).</p><p>Please note that the <code>discard</code> path has to be present even if it is most often
empty because debounce is a flow operator that routes the flow depending on
time and action trigger.</p><pre><code class="language-js">import {debounce} &#x27;cerebral/operators&#x27;

export default [
  debounce(200), {
    continue: [runThisAction],
    discard: []
  },
]</code></pre><p><code>debounce.shared()</code> is typically used with factories, for example to show
notifications where a previous notification should be cancelled by a new one.</p><pre><code class="language-js">import {debounce, set, unset} from &#x27;cerebral/operators&#x27;
import {state} from &#x27;cerebral/tags&#x27;

const sharedDebounce = debounce.share()
function showNotificationFactory(message, ms) {
  return [
    set(state`notification`, message),
    sharedDebounce(ms), {
      continue: [unset(state`notification`)],
      discard: []
    }
  ]
}</code></pre><p>Now when this notification factory is used in different signals, the call to
<code>debounceShared</code> will share the same debounce execution state:</p><pre><code class="language-js">import showNotification from &#x27;./showNotification&#x27;

export default [
  // ... user log in, etc
  ...showNotification(&#x27;User logged in&#x27;, 5000)
]</code></pre><h3 id="wait">wait</h3><p>Wait for the given time in milliseconds and then continue chain.</p><pre><code class="language-js">import {wait} from &#x27;cerebral/operators&#x27;

export default [
  wait(200),
  doSomethingAfterWaiting
]</code></pre><p>If you need to wait while executing in parallel, you should use a <code>continue</code>
path to isolate the actions to be run:</p><pre><code class="language-js">import {wait} from &#x27;cerebral/operators&#x27;
import {parallel} from &#x27;cerebral&#x27;

export default 
  someAction,
  parallel(&#x27;my parallel with wait&#x27;, [
    wait(200), {
      continue: [doSomethingAfterWaiting]
    },
    otherActionInParallel
  ])
]</code></pre><h3 id="when">when</h3><p>Run signal path depending on a truth value or function evaluation.</p><pre><code class="language-js">import {when} from &#x27;cerebral/operators&#x27;

export default [
  when(state`foo.isAwesome`), {
    true: [],
    false: []
  },
  // You can also pass your own function
  when(state`foo.isAwesome`, (value) =&gt; value.length === 3 ), {
    true: [],
    false: []
  }
]</code></pre><p>When used with a truth function, the <code>when</code> operator supports more then a single
“value” argument. The truth function must come last.</p><pre><code class="language-js">import {when} from &#x27;cerebral/operators&#x27;
import {props, state} from &#x27;cerebral/tags&#x27;

export default [
  when(state`clients.$draft.key`, props`key`,
    (draftKey, updatedKey) =&gt; draftKey === updatedKey
  ), {
    true: [
      // Another person edited client, reset form to new value
      set(state`clients.$draft`, props`value`)
    ],
    false: []
  }
]</code></pre></div></div></div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
