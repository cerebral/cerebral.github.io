<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div class="beta">beta</div><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item"><a href="/docs/get_started">get started</a><div class="underline"></div></li><li class="docs-navigation-item active"><a href="/docs/developer_guide">developer guide</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/packages">packages</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/migration">migration</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/api">api</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div><div class="docs-icons"><a href="https://github.com/cerebral/cerebral" class="docs-icon" target="_new"><div class="docs-icon-github"></div>github repo</a><a href="https://discord.gg/0kIweV4bd2bwwsvH" class="docs-icon" target="_new"><div class="docs-icon-discord"></div>chat</a><a href="http://cerebral-website.herokuapp.com/" class="docs-icon" target="_new" style="color:#DD4A68;">old website</a></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger">☰</div><div class="docs-navigation-title mobile">developer guide</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item mobile"><a href="/docs/get_started">get started</a></li><li class="docs-navigation-item active mobile"><a href="/docs/developer_guide">developer guide</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/developer_guide/index.html">Introduction</a></li><li><a href="/docs/developer_guide/state.html">State</a></li><li><a href="/docs/developer_guide/connect.html">Components</a></li><li class="active"><a href="/docs/developer_guide/signals.html">Signals</a><ul><li><a href="#parallel-execution">Parallel execution</a></li><li><a href="#composing">Composing</a></li><li><a href="#running-a-signal">Running a signal</a></li><li><a href="#tutorial">Tutorial</a><ul><li><a href="#adding-a-signal">Adding a signal</a></li><li><a href="#trigger-the-change">Trigger the change</a></li></ul></li></ul></li><li><a href="/docs/developer_guide/actions.html">Actions</a></li><li><a href="/docs/developer_guide/operators.html">Operators</a></li><li><a href="/docs/developer_guide/factories.html">Factories</a></li><li><a href="/docs/developer_guide/paths.html">Paths</a></li><li><a href="/docs/developer_guide/compute.html">Compute</a></li><li><a href="/docs/developer_guide/routing.html">Routing</a></li><li><a href="/docs/developer_guide/organize.html">Organize</a></li><li><a href="/docs/developer_guide/providers.html">Providers</a></li><li><a href="/docs/developer_guide/test.html">Test</a></li><li><a href="/docs/developer_guide/collaborate.html">Collaborate</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/packages">packages</a></li><li class="docs-navigation-item mobile"><a href="/docs/migration">migration</a></li><li class="docs-navigation-item mobile"><a href="/docs/api">api</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/developer_guide/index.html">Introduction</a></li><li><a href="/docs/developer_guide/state.html">State</a></li><li><a href="/docs/developer_guide/connect.html">Components</a></li><li class="active"><a href="/docs/developer_guide/signals.html">Signals</a><ul><li><a href="#parallel-execution">Parallel execution</a></li><li><a href="#composing">Composing</a></li><li><a href="#running-a-signal">Running a signal</a></li><li><a href="#tutorial">Tutorial</a><ul><li><a href="#adding-a-signal">Adding a signal</a></li><li><a href="#trigger-the-change">Trigger the change</a></li></ul></li></ul></li><li><a href="/docs/developer_guide/actions.html">Actions</a></li><li><a href="/docs/developer_guide/operators.html">Operators</a></li><li><a href="/docs/developer_guide/factories.html">Factories</a></li><li><a href="/docs/developer_guide/paths.html">Paths</a></li><li><a href="/docs/developer_guide/compute.html">Compute</a></li><li><a href="/docs/developer_guide/routing.html">Routing</a></li><li><a href="/docs/developer_guide/organize.html">Organize</a></li><li><a href="/docs/developer_guide/providers.html">Providers</a></li><li><a href="/docs/developer_guide/test.html">Test</a></li><li><a href="/docs/developer_guide/collaborate.html">Collaborate</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/developer_guide/signals.md" target="_new">Edit on Github</a></div><h1 id="signals">Signals</h1><p>The signals of Cerebral are named in past tense. So typically you would name a signal <strong>inputChanged</strong> or <strong>mounted</strong>. Going through this guide you will see what benefits this approach gives you. To trigger a signal you call it just like you would call a function, the difference is that you start a function tree execution.</p><p>Cerebral uses the <a href="https://github.com/cerebral/function-tree" target="new">function-tree</a> project to implement its signals. A function-tree allows you to define a tree of functions to be executed. In Cerebral world we call the functions in this tree <strong>actions</strong>.</p><p>You can define this execution tree with a single action:</p><pre><code class="language-js">function myAction () {}

export default myAction</code></pre><p>Or you can group them together in a <em>sequence</em> using an array:</p><pre><code class="language-js">function actionA () {}
function actionB () {}

export default [
  actionA,
  actionB
]</code></pre><p>In a sequence Cerebral runs one action after the other synchronously. When an action returns a promise it will hold until the promise resolves and then continue the sequence.</p><h2 id="parallel-execution">Parallel execution</h2><p>You can also run these actions in parallel. You do that by using the <strong>parallel</strong> function:</p><pre><code class="language-js">import {parallel} from &#x27;cerebral&#x27;

function actionA () {}
function actionB () {}
function actionC () {}

export default [
  parallel([
    actionA,
    actionB
  ]),
  actionC
]</code></pre><p>If actionA returns a promise actionB will still be run instantly, meaning that they run in parallel. When both actionA and actionB is done, actionC is run.</p><h2 id="composing">Composing</h2><p>Actions and a sequence of actions can be composed into other sequences of actions. This is a powerful concept that allows you to decouple a lot of your logic and compose it together wherever it is needed:</p><pre><code class="language-js">import otherActions from &#x27;./otherActions&#x27;

function actionA () {}
function actionB () {}

export default [
  actionA,
  otherActions,
  actionB
]</code></pre><p>Cerebral will now run this as one signal, first running <em>actionA</em>, then whatever is expressed in <em>otherActions</em> and then run <em>actionB</em> last. The debugger will even show otherActions as its own sequence of actions, meaning that composition is visualized in the debugger. If you want you could even name this otherActions sequence, giving even more debugging information.</p><h2 id="running-a-signal">Running a signal</h2><p>To run a signal you can grab it from the controller:</p><pre><code class="language-js">import {Controller} from &#x27;controller&#x27;
import someActions from &#x27;./actions/someActions&#x27;

const controller = Controller({
  signals: {
    somethingHappened: someActions
  }
})

const signal = controller.getSignal(&#x27;somethingHappened&#x27;)
signal()</code></pre><p>This signal triggers synchronously and you can pass it a payload.</p><pre><code class="language-js">...
signal({
  foo: &#x27;bar&#x27;
})</code></pre><p>This payload is brought into the signal execution and acts as the <strong>props</strong> of the signal. Typically you will not trigger signals manually this way, but rather from within a component.</p><pre><code class="language-js">connect({
  somethingHappened: signal`app.somethingHappened`
},
  function MyComponent (props) {
    return &lt;button onClick={() =&gt; props.somethingHappened()}&gt;Click me&lt;/button&gt;
  }
)</code></pre><p>The payload passed to a signal is typically the core value types of JavaScript. Object, Array, String, Number or Boolean. It is also possible to pass in some special value types, like files. For a full list of supported value types, check the <a href="../api/state.html">state API documentation</a>.</p><h2 id="tutorial">Tutorial</h2><p><strong>Before you start,</strong> <a href="https://www.webpackbin.com/bins/-KdBGyGo09NxQfRWSNOb" target="new">load this BIN on Webpackbin</a></p><p>Defining state and user interfaces is more about describing how something should look, rather than how it should update. Updates are the tricky part, this is where we usually introduce complexity in our applications.</p><p>Cerebral allows you to describe updates the same way you describe state and user interfaces, in a declarative manner. We call them <strong>signals</strong> and they will help you handle complexity both in code and in your head.</p><h3 id="adding-a-signal">Adding a signal</h3><p>Let us add a signal to our <strong>Controller</strong> in <em>controller.js</em>:</p><pre><code class="language-js">...
function updateSubtitle ({state}) {
  state.set(&#x27;subTitle&#x27;, &#x27;Updating some state&#x27;)
}

const controller = Controller({
  devtools:  Devtools({
    remoteDebugger: &#x27;127.0.0.1:8585&#x27;
  }),
  state: {
    title: &#x27;Hello from Cerebral!&#x27;,
    subTitle: &#x27;Working on my state management&#x27;
  },
  signals: {
    buttonClicked: updateSubtitle
  }
})
...</code></pre><p>We now defined a signal named <strong>buttonClicked</strong>. The signal tells us “what happened to make this signal run”. What we want to happen when this signal triggers is to update the <strong>subTitle</strong> in our state with a static value. We do this by pointing to our <em>subTitle</em> function. Normally you would define this signal in a separate file.</p><p>As you can see functions in a signal receives an argument, which we <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment" target="new">destructure</a> to grab the <em>state</em>. The argument itself is called the <strong>context</strong>. So <strong>state</strong> is on the <strong>context</strong>, as we can see here:</p><pre><code class="language-js">...
function updateSubtitle ({state}) {
  state.set(&#x27;subTitle&#x27;, &#x27;Updating some state&#x27;)
}
...</code></pre><h3 id="trigger-the-change">Trigger the change</h3><p>Please take a closer look at <em>App.js</em>:</p><pre><code class="language-js">...
connect({
  title: state`title`,
  subTitle: state`subTitle`
},
  ...
)</code></pre><p>As you can see the App-Component depends on <strong>subTitle</strong>. That means it will render automatically whenever <strong>subTitle</strong> changes.</p><p>To trigger the signal we need to wire up a click-handler on a button and add our signal <strong>buttonClicked</strong> to the <strong>connect(..)</strong> method:</p><p><em>App.js</em></p><pre><code class="language-js">import React from &#x27;react&#x27;
import {connect} from &#x27;cerebral/react&#x27;
import {state, signal} from &#x27;cerebral/tags&#x27;

export default connect({
  title: state`title`,
  subTitle: state`subTitle`,
  buttonClicked: signal`buttonClicked`
},
  function App ({title, subTitle, buttonClicked}) {
    return (
      &lt;div&gt;
        &lt;h1&gt;{title}&lt;/h1&gt;
        &lt;h2&gt;{subTitle}&lt;/h2&gt;
        &lt;button onClick={() =&gt; buttonClicked()}&gt;
          Update state
        &lt;/button&gt;
      &lt;/div&gt;
    )
  }
)</code></pre><p>Now click it and take a look at the debugger. You will see the debugger list the execution of the signal, with information about what happened. This is also a tool the Cerebral debugger provides to give you insight into your application. Very handy for example when you need to dig into a <strong>complex application</strong> after not touching it for a long time, introduce a new team member to the application or debug complex execution flows.</p><p>So changing the <em>subTitle</em> is kind of a silly state change on a button click. Let’s introduce a very simple “Toast”-Component. It has already been added for you on the next chapter.</p><p>If it did not work try jumping to the next chapter or <a href="https://discord.gg/0kIweV4bd2bwwsvH" target="new">shout at us on Discord</a>.</p></div></div></div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
