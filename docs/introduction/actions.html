<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div class="beta">beta</div><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item active"><a href="/docs/introduction">introduction</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/api">api</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/addons">addons</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/resources">resources</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div><div class="docs-icons"><a href="https://github.com/cerebral/cerebral" class="docs-icon" target="_new"><div class="docs-icon-github"></div>github repo</a><a href="https://discord.gg/0kIweV4bd2bwwsvH" class="docs-icon" target="_new"><div class="docs-icon-discord"></div>chat</a><a href="http://cerebral-website.herokuapp.com/" class="docs-icon" target="_new" style="color:#DD4A68;">old website</a></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger"></div><div class="docs-navigation-title mobile">introduction</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item active mobile"><a href="/docs/introduction">introduction</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/introduction/index.html">What is Cerebral?</a></li><li><a href="/docs/introduction/the_architecture.html">The architecture</a></li><li><a href="/docs/introduction/install.html">Install</a></li><li><a href="/docs/introduction/debugger.html">Debugger</a></li><li><a href="/docs/introduction/view_type.html">Choosing a view type</a></li><li><a href="/docs/introduction/state.html">State</a></li><li><a href="/docs/introduction/connect.html">Components</a></li><li><a href="/docs/introduction/signals.html">Signals</a></li><li class="active"><a href="/docs/introduction/actions.html">Actions</a><ul><li><a href="#the-context">The context</a></li><li><a href="#update-props">Update props</a></li><li><a href="#async">Async</a></li><li><a href="#tutorial">Tutorial</a><ul><li><a href="#create-an-action">Create an action</a></li><li><a href="#passing-a-payload">Passing a payload</a></li><li><a href="#challenge">Challenge</a></li></ul></li></ul></li><li><a href="/docs/introduction/operators.html">Operators</a></li><li><a href="/docs/introduction/factories.html">Factories</a></li><li><a href="/docs/introduction/paths.html">Paths</a></li><li><a href="/docs/introduction/compute.html">Compute</a></li><li><a href="/docs/introduction/routing.html">Routing</a></li><li><a href="/docs/introduction/organize.html">Organize</a></li><li><a href="/docs/introduction/providers.html">Providers</a></li><li><a href="/docs/introduction/errors.html">Errors</a></li><li><a href="/docs/introduction/test.html">Test</a></li><li><a href="/docs/introduction/production.html">Production</a></li><li><a href="/docs/introduction/collaborate.html">Collaborate</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/api">api</a></li><li class="docs-navigation-item mobile"><a href="/docs/addons">addons</a></li><li class="docs-navigation-item mobile"><a href="/docs/resources">resources</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/introduction/index.html">What is Cerebral?</a></li><li><a href="/docs/introduction/the_architecture.html">The architecture</a></li><li><a href="/docs/introduction/install.html">Install</a></li><li><a href="/docs/introduction/debugger.html">Debugger</a></li><li><a href="/docs/introduction/view_type.html">Choosing a view type</a></li><li><a href="/docs/introduction/state.html">State</a></li><li><a href="/docs/introduction/connect.html">Components</a></li><li><a href="/docs/introduction/signals.html">Signals</a></li><li class="active"><a href="/docs/introduction/actions.html">Actions</a><ul><li><a href="#the-context">The context</a></li><li><a href="#update-props">Update props</a></li><li><a href="#async">Async</a></li><li><a href="#tutorial">Tutorial</a><ul><li><a href="#create-an-action">Create an action</a></li><li><a href="#passing-a-payload">Passing a payload</a></li><li><a href="#challenge">Challenge</a></li></ul></li></ul></li><li><a href="/docs/introduction/operators.html">Operators</a></li><li><a href="/docs/introduction/factories.html">Factories</a></li><li><a href="/docs/introduction/paths.html">Paths</a></li><li><a href="/docs/introduction/compute.html">Compute</a></li><li><a href="/docs/introduction/routing.html">Routing</a></li><li><a href="/docs/introduction/organize.html">Organize</a></li><li><a href="/docs/introduction/providers.html">Providers</a></li><li><a href="/docs/introduction/errors.html">Errors</a></li><li><a href="/docs/introduction/test.html">Test</a></li><li><a href="/docs/introduction/production.html">Production</a></li><li><a href="/docs/introduction/collaborate.html">Collaborate</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/introduction/actions.md" target="_new">Edit on Github</a></div><h1 id="actions">Actions</h1><p>A signal runs actions and actions are actually just functions. These functions receive one argument, created by Cerebral. It is called the <strong>context</strong>:</p><pre><code class="language-js">function iAmAnAction (context) {}</code></pre><p>Whatever you need to define the logic of an action is on the context. It means you do not need any API to define an action or import any other modules to define business logic. This makes actions highly testable and easy to write.</p><p>Typically you use actions to change the state of the application or run other side effects:</p><pre><code class="language-js">// With destructuring
function iAmAnAction ({props, state}) {
  state.set(&#x27;some.path&#x27;, props.someValue)
}

// Without destructuring
function iAmAnAction (context) {
  context.state.set(&#x27;some.path&#x27;, context.props.someValue)
}</code></pre><h2 id="the-context">The context</h2><p>So the context is just an object. A new context is created for every action run and it is populated by what we call <strong>providers</strong>. There are default providers in Cerebral that exposes <strong>props</strong> and <strong>path</strong>, as seen in above example. There are also other default providers, you can add new providers by installing extra packages and you can even create your own. You will learn more about providers later.</p><h2 id="update-props">Update props</h2><p>You update the props on the signal by returning an object from the action. This object will be merged with existing props.</p><pre><code class="language-js">function iAmAnAction () {
  return {
    newProp: &#x27;someValue&#x27;
  }
}</code></pre><h2 id="async">Async</h2><p>When actions return a promise the signal will hold execution until it is resolved. any resolved values will be merged in with props.</p><pre><code class="language-js">function iAmAnAction () {
  return new Promise((resolve) =&gt; {
    resolve({
      newProp: &#x27;someValue&#x27;
    })
  })
}</code></pre><h2 id="tutorial">Tutorial</h2><p><strong>Before you start,</strong> <a href="https://www.webpackbin.com/bins/-KdBPZwKFDQKkAcUqRte" target="new">load this BIN on Webpackbin</a></p><p>If you run this bin right away you will see a message popping up after clicking the button.
Now let us customize the existing <strong>signal</strong> by adding a custom <strong>action</strong> in between the sequence.</p><p>Signals can take a props-object which can then be accessed or processed by any subsequent action.</p><p>Let us say you have a user input which should get written to state.
As we now know, the correct way to write any state change is to use <strong>signals</strong> with <strong>actions</strong>.</p><p>Just like we are able to grab the <strong>state</strong> from the context of an action, we can also grab the <strong>props</strong>. This props object can be populated when a signal triggers and it can be further extended using actions. Any object returned from an action will be merged into the current props and passed to the next action.</p><h3 id="create-an-action">Create an action</h3><p>Let us create a new action inside <em>controller.js</em> that will take a prop from the signal and add some exclamation marks.</p><pre><code class="language-js">function shoutIt ({props}) {
  return {
    message: `${props.message}!!!`
  }
}</code></pre><p>As you can see we grabbed the props just like we grabbed the state. The object we return from the action will be merged with the existing props. That means we are overriding the <strong>message</strong> with exclamation marks.</p><p>We also add an action for setting the toast which pulls out the message from the props.</p><pre><code class="language-js">function setToast ({state, props}) {
  state.set(&#x27;toast&#x27;, props.message)
}</code></pre><p>Then we wire those actions together in our buttonClicked-<strong>signal</strong></p><pre><code class="language-js">...
{
  buttonClicked: [
    shoutIt,
    setToast
  ]  
}
...</code></pre><h3 id="passing-a-payload">Passing a payload</h3><p>As you can see we are passing the message as a payload in the onClick-Handler. Feel free to change it:</p><p><em>App.js</em></p><pre><code class="language-js">        ...
        &lt;button onClick={() =&gt; buttonClicked({
          message: &#x27;Please shout me&#x27;
        })}&gt;
          Update state
        &lt;/button&gt;
        ...</code></pre><p>Now we are ready to test drive our changes. Click the button and you should see the toast message appear with three exclamation marks behind. Take some time to open up the <strong>debugger</strong> and explore the changes you’ve made. You can track the flow of the props object as it is passed into the action <em>props:{}</em> and after the action has excecuted <em>output: {}</em>. Keep in mind that the object returned from an action will be merged with the props object and handed over to the next action. You could just as easily use a different property for the shouted message.</p><h3 id="challenge">Challenge</h3><ul><li>Add another custom action which transforms the props value to Uppercase. You may override existing properties on the props or create a new one</li></ul><p>If it did not work try jumping to the next chapter or <a href="https://discord.gg/0kIweV4bd2bwwsvH" target="new">shout at us on Discord</a>.</p></div></div></div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
