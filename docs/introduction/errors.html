<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="/images/favicons/favicon-16x16.png" sizes="16x16">
    <link rel="manifest" href="/images/favicons/manifest.json">
    <link rel="mask-icon" href="/images/favicons/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="theme-color" content="#ffffff">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div class="beta">beta</div><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item active"><a href="/docs/introduction">introduction</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/api">api</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/addons">addons</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/resources">resources</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div><div class="docs-icons"><a href="https://github.com/cerebral/cerebral" class="docs-icon" target="_new"><div class="docs-icon-github"></div>github repo</a><a href="https://discord.gg/0kIweV4bd2bwwsvH" class="docs-icon" target="_new"><div class="docs-icon-discord"></div>chat</a><a href="http://cerebral-website.herokuapp.com/" class="docs-icon" target="_new" style="color:#DD4A68;">old website</a></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger"></div><div class="docs-navigation-title mobile">introduction</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item active mobile"><a href="/docs/introduction">introduction</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/introduction/index.html">What is Cerebral?</a></li><li><a href="/docs/introduction/the_architecture.html">The architecture</a></li><li><a href="/docs/introduction/install.html">Install</a></li><li><a href="/docs/introduction/debugger.html">Debugger</a></li><li><a href="/docs/introduction/view_type.html">Views</a></li><li><a href="/docs/introduction/state.html">State</a></li><li><a href="/docs/introduction/connect.html">Components</a></li><li><a href="/docs/introduction/signals.html">Signals</a></li><li><a href="/docs/introduction/actions.html">Actions</a></li><li><a href="/docs/introduction/operators.html">Operators</a></li><li><a href="/docs/introduction/factories.html">Factories</a></li><li><a href="/docs/introduction/paths.html">Paths</a></li><li><a href="/docs/introduction/compute.html">Compute</a></li><li><a href="/docs/introduction/routing.html">Routing</a></li><li><a href="/docs/introduction/organize.html">Organize</a></li><li><a href="/docs/introduction/providers.html">Providers</a></li><li class="active"><a href="/docs/introduction/errors.html">Errors</a><ul><li><a href="#catching-errors">Catching errors</a></li><li><a href="#catching-globally">Catching globally</a></li><li><a href="#creating-an-error-type">Creating an error type</a></li></ul></li><li><a href="/docs/introduction/test.html">Test</a></li><li><a href="/docs/introduction/production.html">Production</a></li><li><a href="/docs/introduction/collaborate.html">Collaborate</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/api">api</a></li><li class="docs-navigation-item mobile"><a href="/docs/addons">addons</a></li><li class="docs-navigation-item mobile"><a href="/docs/resources">resources</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/introduction/index.html">What is Cerebral?</a></li><li><a href="/docs/introduction/the_architecture.html">The architecture</a></li><li><a href="/docs/introduction/install.html">Install</a></li><li><a href="/docs/introduction/debugger.html">Debugger</a></li><li><a href="/docs/introduction/view_type.html">Views</a></li><li><a href="/docs/introduction/state.html">State</a></li><li><a href="/docs/introduction/connect.html">Components</a></li><li><a href="/docs/introduction/signals.html">Signals</a></li><li><a href="/docs/introduction/actions.html">Actions</a></li><li><a href="/docs/introduction/operators.html">Operators</a></li><li><a href="/docs/introduction/factories.html">Factories</a></li><li><a href="/docs/introduction/paths.html">Paths</a></li><li><a href="/docs/introduction/compute.html">Compute</a></li><li><a href="/docs/introduction/routing.html">Routing</a></li><li><a href="/docs/introduction/organize.html">Organize</a></li><li><a href="/docs/introduction/providers.html">Providers</a></li><li class="active"><a href="/docs/introduction/errors.html">Errors</a><ul><li><a href="#catching-errors">Catching errors</a></li><li><a href="#catching-globally">Catching globally</a></li><li><a href="#creating-an-error-type">Creating an error type</a></li></ul></li><li><a href="/docs/introduction/test.html">Test</a></li><li><a href="/docs/introduction/production.html">Production</a></li><li><a href="/docs/introduction/collaborate.html">Collaborate</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/introduction/errors.md" target="_new">Edit on Github</a></div><h1>Errors</h1><p>Handling complex asynchronous flows is a challenging task for error handling. If things are not done correctly errors can be swallowed and you will have a hard time figuring out why your application does not work.</p><p>Error handling in Cerebral signals are done for you. Wherever you throw an error, it will be caught correctly and thrown to the console unless you have explicitly said you want to handle it. And even when you do explicitly handle it Cerebral will still show the error in the debugger, meaning you can never go wrong. The action in question is highlighted red, you will see the error message, the code related and even what executed related to you catching the error.</p><p><img src="/images/debugger_error.png" alt="debugger_error"/></p><h2>Catching errors</h2><p>To catch an error from a signal you can define it with the signal definition:</p><p><em>someModule.js</em></p><pre class="language-js"><code class="language-js">export default {
  state: {},
  signals: {
    // Define the signal as an object
    somethingHappened: {
      signal: someSequence,
      catch: new Map([
        [FirebaseProviderError, someErrorHandlingSequence]
      ])
    }
  }
}</code></pre><p>If you are not familiar with the <strong>Map</strong> JavaScript API, <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map" target="new">you can read more here</a>. We basically tell the signal that we are interested in any errors thrown by the Firebase Provider. Then we point to the sequence of actions we want to handle it. An error will be passed in to the sequence of actions handling the error:</p><pre class="language-js"><code class="language-js">{
  foo: &#x27;bar&#x27;, // already on payload
  error: {
    name: &#x27;FirebaseProviderError&#x27;,
    message: &#x27;Could not connect&#x27;,
    stack: &#x27;...&#x27;
  }
}</code></pre><h2>Catching globally</h2><p>In most applications error handling can be handled at a global level. That means you define your signals as normal and you rather define catch handlers on the controller itself:</p><pre class="language-js"><code class="language-js">import {Controller} from &#x27;cerebral&#x27;
import {
  FirebaseProviderAuthenticationError,
  FirebaseProviderError
} from &#x27;@cerebral/firebase&#x27;
import {
  HttpProviderError
} from &#x27;@cerebral/http&#x27;

const controller = Controller({
  modules: {},
  catch: new Map([
    [FirebaseProviderAuthenticationError, []]
    [FirebaseProviderError, []],
    [HttpProviderError, []]
  ])
})</code></pre><h2>Creating an error type</h2><p>JavaScript has a base error class of <strong>Error</strong>. When you create your own error types it makes sense to extend <strong>Error</strong>. This is only recently supported in browsers, but you can use <a href="https://www.npmjs.com/package/es6-error" target="new">es6-error</a> to make sure extending errors works correctly.</p><pre class="language-js"><code class="language-js">import ES6Error from &#x27;es6-error&#x27;

class AppError extends ES6Error {
  constructor(message) {
    super(message)
    this.name = &#x27;AppError&#x27;
  }
}</code></pre><p>This allows you to create more specific errors by subclassing:</p><pre class="language-js"><code class="language-js">class AuthError extends AppError {
  constructor(message, code) {
    super(message)

    this.name = &#x27;AuthError&#x27;
    this.code = code
  }
  // By adding a custom &quot;toJSON&quot; method you decide
  // how the error will be shown when passed to the
  // debugger and your catch handler
  toJSON () {
    return {
      name: this.name,
      message: this.message,
      code: this.code,
      stack: this.stack
    }
  }
}</code></pre></div></div></div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
