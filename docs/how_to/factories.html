<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item"><a href="/docs/get_going">get going</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/tutorial">tutorial</a><div class="underline"></div></li><li class="docs-navigation-item active"><a href="/docs/how_to">how to</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/migration">migration</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/api">api</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger">☰</div><div class="docs-navigation-title mobile">how to</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item mobile"><a href="/docs/get_going">get going</a></li><li class="docs-navigation-item mobile"><a href="/docs/tutorial">tutorial</a></li><li class="docs-navigation-item active mobile"><a href="/docs/how_to">how to</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/how_to/index.html">Define state</a></li><li><a href="/docs/how_to/signals.html">Run signals</a></li><li><a href="/docs/how_to/actions.html">Create actions</a></li><li><a href="/docs/how_to/chains_and_paths.html">Use chains and paths</a></li><li><a href="/docs/how_to/providers.html">Add providers</a></li><li class="active"><a href="/docs/how_to/factories.html">Create factories</a><ul><li><a href="#action-factory">Action factory</a></li><li><a href="#chain-factory">Chain factory</a></li></ul></li><li><a href="/docs/how_to/connect.html">Connect components</a></li><li><a href="/docs/how_to/compute.html">Compute values</a></li><li><a href="/docs/how_to/organize.html">Organize</a></li><li><a href="/docs/how_to/test.html">Test</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/migration">migration</a></li><li class="docs-navigation-item mobile"><a href="/docs/api">api</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/how_to/index.html">Define state</a></li><li><a href="/docs/how_to/signals.html">Run signals</a></li><li><a href="/docs/how_to/actions.html">Create actions</a></li><li><a href="/docs/how_to/chains_and_paths.html">Use chains and paths</a></li><li><a href="/docs/how_to/providers.html">Add providers</a></li><li class="active"><a href="/docs/how_to/factories.html">Create factories</a><ul><li><a href="#action-factory">Action factory</a></li><li><a href="#chain-factory">Chain factory</a></li></ul></li><li><a href="/docs/how_to/connect.html">Connect components</a></li><li><a href="/docs/how_to/compute.html">Compute values</a></li><li><a href="/docs/how_to/organize.html">Organize</a></li><li><a href="/docs/how_to/test.html">Test</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/docs/docs/how_to/factories.md" target="_new">Edit on Github</a></div><h1 id="create-factories">Create factories</h1><p>Function factories is a common term in programming. It is basically a function that returns a function:</p><pre><code class="language-js">function createHelloMessage (name) {
  function helloMessage () {
    console.log(`Hello there ${name}`)
  }

  return helloMessage
}

const helloBob = createHelloMessage(&#x27;Bob&#x27;)
helloBob() // Logs: &quot;Hello there Bob&quot;</code></pre><p>In Cerebral you will find yourself creating a lot of factories. Factories for creating actions and even factories for creating chains. Actually the Cerebral <strong>operators</strong> are action and chain factories.</p><h2 id="action-factory">Action factory</h2><pre><code class="language-js">function hasUserRoleFactory (role) {
  function hasUserRole ({state, path}) {
    if (state.get(&#x27;user.role&#x27;) === role) {
      return path.true()
    }

    return path.false()
  }

  return hasUserRole
}</code></pre><p>So this factory can now be used in any chain:</p><pre><code class="language-js">import hasUserRole from &#x27;../factories/hasUserRole&#x27;

export default [
  hasUserRole(&#x27;admin&#x27;), {
    true: [],
    false: []
  }
]</code></pre><h2 id="chain-factory">Chain factory</h2><pre><code class="language-js">import {set, wait} from &#x27;cerebral/operators&#x27;
import {state} from &#x27;cerebral/tags&#x27;

function showMessageFactory (message, ms) {
  return [
    set(state`app.message`, message),
    wait(ms),
    set(state`app.message`, null)
  ]
}</code></pre><p>Now this can be used in any chain:</p><pre><code class="language-js">import showMessage from &#x27;../factories/showMessage&#x27;

export default [
  ...showMessage(&#x27;Hello there!&#x27;, 500)
]</code></pre><p>Chain factories should always be <strong>spread</strong> into chains. Think of it as “merging it in”. Usually it does not matter, cause it will just be treated as a parallel execution, but it is good practice.</p></div></div></div><div class="docs-footer"><div class="docs-footer-column"><div class="docs-footer-header">ORGANIZATION</div><a class="docs-footer-link" href="https://github.com/cerebral/cerebral/graphs/contributors" target="_new">Contributors</a><a class="docs-footer-link" href="http://www.webpackbin.com" target="_new">www.webpackbin.com</a><a class="docs-footer-link" href="http://www.christianalfoni.com" target="_new">www.christianalfoni.com</a></div><div class="docs-footer-column"><div class="docs-footer-header">ARTICLES AND USEFUL LINKS</div><a class="docs-footer-link" href="http://medium.com/p/5793c08db2cc" target="_new">The story of Cerebral</a><a class="docs-footer-link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730" target="_new">An unlikely success story</a></div><div class="docs-footer-column"><div class="docs-footer-header">HELP</div><a class="docs-footer-link" href="https://github.com/cerebral/cerebral" target="_new">Cerebral github repo</a><a class="docs-footer-link" href="https://discord.gg/0kIweV4bd2bwwsvH" target="_new">Discoard chat</a></div></div><div style="z-index:99;background-color:#DD4A68;color:#fff;padding:5px 10px;position:fixed;width:100%;bottom:0;left:0;">Docs are still being written and might not be up to date with API</div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/scroll-detect.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
