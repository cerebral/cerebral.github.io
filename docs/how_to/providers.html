<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item"><a href="/docs/get_started">get started</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/tutorial">tutorial</a><div class="underline"></div></li><li class="docs-navigation-item active"><a href="/docs/how_to">how to</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/migration">migration</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/api">api</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div><div class="docs-icons"><a href="https://github.com/cerebral/cerebral" class="docs-icon" target="_new"><div class="docs-icon-github"></div>github repo</a><a href="https://discord.gg/0kIweV4bd2bwwsvH" class="docs-icon" target="_new"><div class="docs-icon-discord"></div>chat</a></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger">â˜°</div><div class="docs-navigation-title mobile">how to</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item mobile"><a href="/docs/get_started">get started</a></li><li class="docs-navigation-item mobile"><a href="/docs/tutorial">tutorial</a></li><li class="docs-navigation-item active mobile"><a href="/docs/how_to">how to</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/how_to/index.html">Define state</a></li><li><a href="/docs/how_to/signals.html">Run signals</a></li><li><a href="/docs/how_to/actions.html">Create actions</a></li><li><a href="/docs/how_to/chains_and_paths.html">Use chains and paths</a></li><li class="active"><a href="/docs/how_to/providers.html">Add providers</a><ul><li><a href="#context-provider">Context Provider</a></li><li><a href="#creating-a-provider">Creating a provider</a></li></ul></li><li><a href="/docs/how_to/factories.html">Create factories</a></li><li><a href="/docs/how_to/connect.html">Connect components</a></li><li><a href="/docs/how_to/compute.html">Compute values</a></li><li><a href="/docs/how_to/organize.html">Organize</a></li><li><a href="/docs/how_to/test.html">Test</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/migration">migration</a></li><li class="docs-navigation-item mobile"><a href="/docs/api">api</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/how_to/index.html">Define state</a></li><li><a href="/docs/how_to/signals.html">Run signals</a></li><li><a href="/docs/how_to/actions.html">Create actions</a></li><li><a href="/docs/how_to/chains_and_paths.html">Use chains and paths</a></li><li class="active"><a href="/docs/how_to/providers.html">Add providers</a><ul><li><a href="#context-provider">Context Provider</a></li><li><a href="#creating-a-provider">Creating a provider</a></li></ul></li><li><a href="/docs/how_to/factories.html">Create factories</a></li><li><a href="/docs/how_to/connect.html">Connect components</a></li><li><a href="/docs/how_to/compute.html">Compute values</a></li><li><a href="/docs/how_to/organize.html">Organize</a></li><li><a href="/docs/how_to/test.html">Test</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/docs/docs/how_to/providers.md" target="_new">Edit on Github</a></div><h1 id="add-providers">Add providers</h1><p>Providers are added to the context of every action executed by a signal. Providers can be everything from a tool you are already using, to something Cerebral specific. The point of providers is to separate side effects from execution. That means you can create all the logic you want with chains and actions without creating any dependencies to other tools. This makes them highly testable and generally gives you more flexibility.</p><p>Adding a provider is done by:</p><pre><code class="language-js">import {Controller} from &#x27;cerebral&#x27;

function MyProvider (context, functionDetails, payload, prevPayload) {
  // The current context object, which can be mutated
  context

  // The details of the action running, like name, index (id) etc.
  functionDetails

  // The current payload passed to the action
  payload

  // The previous payload
  prevPayload

  // You have to return the context after it has bee mutated
  return context
}

const controller = Controller({
  providers: [
    MyProvider
  ]
})</code></pre><h2 id="context-provider">Context Provider</h2><p>There is a built in provider with Cerebral you can use to expose tools. The provider will wrap the tool so that you can see its usage in the debugger:</p><pre><code class="language-js">import {Controller} from &#x27;cerebral&#x27;
import {ContextProvider} from &#x27;cerebral/providers&#x27;
import axios from &#x27;axios&#x27;
import uuid from &#x27;uuid&#x27;

const controller = Controller({
  providers: [
    ContextProvider({axios, uuid})
  ]
})</code></pre><p>Note that some tools has a very complex API that <strong>ContextProvider</strong> has a hard time analyzing. With these kinds of tools it is a better idea to create your own provider, exposing APIs that you actually use from the original tool.</p><h2 id="creating-a-provider">Creating a provider</h2><p>You can use providers for pretty much anything, though typically it is to handle some kind of side effect. Examples of providers is <a href="https://github.com/cerebral/cerebral/tree/master/packages/cerebral-provider-firebase" target="new">cerebral-provider-firebase</a> and <a href="https://github.com/cerebral/cerebral/tree/master/packages/cerebral-provider-http" target="new">cerebral-provider-http</a>.</p><pre><code class="language-js">function MyProvider (options = {}) {
  let cachedProvider = null

  function createProvider (context) {
    return {
      doSomething() {},
      doSomethingElse() {}
    }
  }

  return (context) =&gt; {
    context.myProvider = cachedProvider = cachedProvider || createProvider(context)

    if (context.debugger) {
      context.debugger.wrapProvider(&#x27;myProvider&#x27;)
    }

    return context
  }
}</code></pre><p>This is a very typical setup for a provider. It creates and caches it. It also wraps and methods exposed if the debugger is available, tracking its execution.</p></div></div></div><div style="z-index:99;background-color:#DD4A68;color:#fff;padding:5px 10px;position:fixed;width:100%;bottom:0;left:0;">Docs are still being written and might not be up to date with API</div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
