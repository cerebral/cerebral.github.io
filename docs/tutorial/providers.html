<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item"><span>install</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/install/index.html">Cerebral</a><a class="docs-navigation-subItem" href="/docs/install/debugger.html">Debugger</a><a class="docs-navigation-subItem" href="/docs/install/boilerplate.html">Boilerplates</a><a class="docs-navigation-subItem" href="/docs/install/tools.html">Tools</a><a class="docs-navigation-subItem" href="/docs/install/function_tree.html">Function Tree</a></div></li><li class="docs-navigation-item active"><span>tutorial</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/tutorial/index.html">Introduction</a><a class="docs-navigation-subItem" href="/docs/tutorial/define_state.html">Define State</a><a class="docs-navigation-subItem" href="/docs/tutorial/render_state.html">Render state</a><a class="docs-navigation-subItem" href="/docs/tutorial/update_state.html">Update state</a><a class="docs-navigation-subItem" href="/docs/tutorial/chains.html">Chains</a><a class="docs-navigation-subItem" href="/docs/tutorial/actions.html">Actions</a><a class="docs-navigation-subItem" href="/docs/tutorial/async_actions.html">Async actions</a><a class="docs-navigation-subItem" href="/docs/tutorial/paths.html">Paths</a><a class="docs-navigation-subItem" href="/docs/tutorial/compute_state.html">Compute state</a><a class="docs-navigation-subItem active" href="/docs/tutorial/providers.html">Providers</a><a class="docs-navigation-subItem" href="/docs/tutorial/routing.html">Routing</a><a class="docs-navigation-subItem" href="/docs/tutorial/modules.html">Modules</a></div></li><li class="docs-navigation-item"><span>in depth</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/in depth/index.html">The architecture</a><a class="docs-navigation-subItem" href="/docs/in depth/controller.html">Controller</a><a class="docs-navigation-subItem" href="/docs/in depth/state.html">State</a><a class="docs-navigation-subItem" href="/docs/in depth/signals.html">Signals</a><a class="docs-navigation-subItem" href="/docs/in depth/chains_and_paths.html">Chains and paths</a><a class="docs-navigation-subItem" href="/docs/in depth/actions.html">Actions</a><a class="docs-navigation-subItem" href="/docs/in depth/providers.html">Providers</a><a class="docs-navigation-subItem" href="/docs/in depth/tags.html">Tags</a><a class="docs-navigation-subItem" href="/docs/in depth/operators.html">Operators</a><a class="docs-navigation-subItem" href="/docs/in depth/factories.html">Factories</a><a class="docs-navigation-subItem" href="/docs/in depth/connect.html">Connect</a><a class="docs-navigation-subItem" href="/docs/in depth/compute.html">Compute</a><a class="docs-navigation-subItem" href="/docs/in depth/routing.html">Routing</a></div></li><li class="docs-navigation-item"><span>best practices</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/best practices/index.html">Organizing</a><a class="docs-navigation-subItem" href="/docs/best practices/constants.html">Constants</a><a class="docs-navigation-subItem" href="/docs/best practices/testing.html">Testing</a><a class="docs-navigation-subItem" href="/docs/best practices/load_initial_data.html">Load initial data</a><a class="docs-navigation-subItem" href="/docs/best practices/storing_server_data.html">Storing server data</a><a class="docs-navigation-subItem" href="/docs/best practices/lists.html">Lists</a><a class="docs-navigation-subItem" href="/docs/best practices/modals.html">Modals</a><a class="docs-navigation-subItem" href="/docs/best practices/feedback_messages.html">Feedback messages</a><a class="docs-navigation-subItem" href="/docs/best practices/popups.html">Popups</a><a class="docs-navigation-subItem" href="/docs/best practices/long_running_side_effects.html">Long running side effects</a><a class="docs-navigation-subItem" href="/docs/best practices/server_side.html">Server side</a></div></li><li class="docs-navigation-item"><span>migration</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/migration/index.html">From 1.x to 2.x</a></div></li><li class="docs-navigation-item"><span>api</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/api/index.html">Controller</a><a class="docs-navigation-subItem" href="/docs/api/state.html">State</a><a class="docs-navigation-subItem" href="/docs/api/signals.html">Signals</a><a class="docs-navigation-subItem" href="/docs/api/tags.html">Tags</a><a class="docs-navigation-subItem" href="/docs/api/connect.html">Connect</a><a class="docs-navigation-subItem" href="/docs/api/modules.html">Modules</a><a class="docs-navigation-subItem" href="/docs/api/operators.html">Operators</a><a class="docs-navigation-subItem" href="/docs/api/providers.html">Providers</a><a class="docs-navigation-subItem" href="/docs/api/compute.html">Compute</a><a class="docs-navigation-subItem" href="/docs/api/router.html">Router</a></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="#providers">Providers</a><ul><li><a href="#adding-a-provider">Adding a provider</a></li><li><a href="#adding-a-3rd-party-provider">Adding a 3rd party provider</a></li></ul></li></ul></div></div><div class="docs-doc"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/edit/master/docs/docs/providers.md" target="_new">Edit on Github</a></div><div class="docs-doc-content"><div style="background-color:#DD4A68;color:#fff;margin:10px;padding:5px 10px;border-radius:3px;">Docs are still being written and might not be up to date with API</div><h1 id="providers">Providers</h1><p><strong>Load up chapter 09</strong> - <a href="09" target="new">Preview</a></p><p>Good news, we have already used a provider before. Do you remember the <em>http-provider</em> we are using to get data from servers?</p><p>A provider basically adds itself to the context object of our actions. Let us check out our existing code in <em>./src/index.js</em>. Note the <em>http</em> - object on the context of the <em>get</em> action returned:</p><pre><code class="language-js">...
function getRepoFactory(repoName) {
  function getRepo({http, path}) {
    return http.get(`/repos/cerebral/${repoName}`)
      .then(response =&gt; path.success({data: response.result}))
      .catch(error =&gt; path.error({data: error.result}))
  }

  return getRepo
}
...</code></pre><h2 id="adding-a-provider">Adding a provider</h2><p>What needs to be done? Well not too much. Just add the provider in your controller in <em>./src/index.js</em></p><p>Thats how it looks right now:</p><pre><code class="language-js">...
import HttpProvider from &#x27;cerebral-provider-http&#x27;
...
    providers: [
      HttpProvider({
        baseUrl: &#x27;https://api.github.com&#x27;
      })
    ]
...</code></pre><p>What are the <strong>benefits</strong> of using a provider in this way? Well we have decoupled the dependency of the HTTP tool in all our actions, meaning that when testing actions we can just pass in a resolved or rejected promise as <strong>http.get</strong> to simulate a response. As well the <strong>Debugger</strong> can now track and visualize the execution of providers.</p><p>Just keep in mind that you could use any library as an provider, weâ€™ve just used http-provider here because it is very lightweight and has some additional benefits when http-requests need to report back progress and the likes (because it also uses Cerebral-Signals for doing that). Let us add another one. Why not provide additional logging functionality to our actions? Let us use <a href="https://github.com/jonnyreeves/js-logger" target="new">js-logger</a> one.</p><h2 id="adding-a-3rd-party-provider">Adding a 3rd party provider</h2><p>We have already installed the library using npm. So it was sitting there and waiting and now the time is ready to use it! Because we add a 3rd-party provider we need to wrap it up into a so called <em>ContextProvider</em> to get the benefits mentioned above.</p><p>So please add the following imports to your <em>./src/index.js</em></p><pre><code class="language-js">...
import logger from &#x27;js-logger&#x27;
import {ContextProvider} from &#x27;cerebral/providers&#x27;
...
logger.useDefaults()
...</code></pre><p>Now we are ready to register it to our controller:</p><pre><code class="language-js">...
  providers: [
    HttpProvider({
      baseUrl: &#x27;https://api.github.com&#x27;
    }),
    ContextProvider({
      logger
    })
  ]
...</code></pre><p>Now we have the logger in place so let us use it to track request times:</p><pre><code class="language-js">function getRepoFactory(repoName) {
  function getRepo({logger, http, path}) {
    logger.time(`request ${repoName}`)
    return http.get(`/repos/cerebral/${repoName}`)
      .then(response =&gt; {
        logger.timeEnd(`request ${repoName}`)
        return path.success({data: response.result})
      })
      .catch(error =&gt; {
        logger.timeEnd(`request ${repoName}`)
        return path.error({data: error.result})
      })
  }

  return getRepo
}</code></pre><p>Now run your code and check the console after doing a request do a server.
Thats it! You have just successfully integrated another provider!</p><p><strong>Want to dive deeper?</strong> - <a href="../in-depth/07_providers.html" target="new">Go in depth</a>, or move on with the tutorial</p></div></div></div><div class="docs-footer"><div class="docs-footer-column"><div class="docs-footer-header">ORGANIZATION</div><a class="docs-footer-link" href="https://github.com/cerebral/cerebral/graphs/contributors" target="_new">Contributors</a><a class="docs-footer-link" href="http://www.webpackbin.com" target="_new">www.webpackbin.com</a><a class="docs-footer-link" href="http://www.christianalfoni.com" target="_new">www.christianalfoni.com</a></div><div class="docs-footer-column"><div class="docs-footer-header">ARTICLES AND USEFUL LINKS</div><a class="docs-footer-link" href="http://medium.com/p/5793c08db2cc" target="_new">The story of Cerebral</a><a class="docs-footer-link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730" target="_new">An unlikely success story</a></div><div class="docs-footer-column"><div class="docs-footer-header">HELP</div><a class="docs-footer-link" href="https://github.com/cerebral/cerebral" target="_new">Cerebral github repo</a><a class="docs-footer-link" href="https://discord.gg/0kIweV4bd2bwwsvH" target="_new">Discoard chat</a></div></div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/scroll-detect.js"></script>
  </body>
</html>
