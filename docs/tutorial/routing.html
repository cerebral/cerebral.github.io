<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item"><span>install</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/install/index.html">Cerebral</a><a class="docs-navigation-subItem" href="/docs/install/boilerplate.html">Boilerplates</a><a class="docs-navigation-subItem" href="/docs/install/tools.html">Tools</a><a class="docs-navigation-subItem" href="/docs/install/function_tree.html">Function Tree</a></div></li><li class="docs-navigation-item active"><span>tutorial</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/tutorial/index.html">Introduction</a><a class="docs-navigation-subItem" href="/docs/tutorial/define_state.html">Define State</a><a class="docs-navigation-subItem" href="/docs/tutorial/render_state.html">Render state</a><a class="docs-navigation-subItem" href="/docs/tutorial/update_state.html">Update state</a><a class="docs-navigation-subItem" href="/docs/tutorial/chains.html">Chains</a><a class="docs-navigation-subItem" href="/docs/tutorial/actions.html">Actions</a><a class="docs-navigation-subItem" href="/docs/tutorial/async_actions.html">Async actions</a><a class="docs-navigation-subItem" href="/docs/tutorial/paths.html">Paths</a><a class="docs-navigation-subItem" href="/docs/tutorial/compute_state.html">Compute state</a><a class="docs-navigation-subItem" href="/docs/tutorial/providers.html">Providers</a><a class="docs-navigation-subItem active" href="/docs/tutorial/routing.html">Routing</a><a class="docs-navigation-subItem" href="/docs/tutorial/modules.html">Modules</a></div></li><li class="docs-navigation-item"><span>in depth</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/in_depth/index.html">The architecture</a><a class="docs-navigation-subItem" href="/docs/in_depth/controller.html">Controller</a><a class="docs-navigation-subItem" href="/docs/in_depth/state.html">State</a><a class="docs-navigation-subItem" href="/docs/in_depth/signals.html">Signals</a><a class="docs-navigation-subItem" href="/docs/in_depth/chains_and_paths.html">Chains and paths</a><a class="docs-navigation-subItem" href="/docs/in_depth/actions.html">Actions</a><a class="docs-navigation-subItem" href="/docs/in_depth/providers.html">Providers</a><a class="docs-navigation-subItem" href="/docs/in_depth/tags.html">Tags</a><a class="docs-navigation-subItem" href="/docs/in_depth/operators.html">Operators</a><a class="docs-navigation-subItem" href="/docs/in_depth/factories.html">Factories</a><a class="docs-navigation-subItem" href="/docs/in_depth/connect.html">Connect</a><a class="docs-navigation-subItem" href="/docs/in_depth/compute.html">Compute</a><a class="docs-navigation-subItem" href="/docs/in_depth/routing.html">Routing</a></div></li><li class="docs-navigation-item"><span>best practices</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/best_practices/index.html">Organizing</a><a class="docs-navigation-subItem" href="/docs/best_practices/constants.html">Constants</a><a class="docs-navigation-subItem" href="/docs/best_practices/testing.html">Testing</a><a class="docs-navigation-subItem" href="/docs/best_practices/load_initial_data.html">Load initial data</a><a class="docs-navigation-subItem" href="/docs/best_practices/storing_server_data.html">Storing server data</a><a class="docs-navigation-subItem" href="/docs/best_practices/lists.html">Lists</a><a class="docs-navigation-subItem" href="/docs/best_practices/modals.html">Modals</a><a class="docs-navigation-subItem" href="/docs/best_practices/feedback_messages.html">Feedback messages</a><a class="docs-navigation-subItem" href="/docs/best_practices/popups.html">Popups</a><a class="docs-navigation-subItem" href="/docs/best_practices/long_running_side_effects.html">Long running side effects</a><a class="docs-navigation-subItem" href="/docs/best_practices/server_side.html">Server side</a></div></li><li class="docs-navigation-item"><span>migration</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/migration/index.html">From 1.x to 2.x</a></div></li><li class="docs-navigation-item"><span>api</span><div class="underline"></div><div class="docs-navigation-subItems"><a class="docs-navigation-subItem" href="/docs/api/index.html">Controller</a><a class="docs-navigation-subItem" href="/docs/api/state.html">State</a><a class="docs-navigation-subItem" href="/docs/api/signals.html">Signals</a><a class="docs-navigation-subItem" href="/docs/api/tags.html">Tags</a><a class="docs-navigation-subItem" href="/docs/api/connect.html">Connect</a><a class="docs-navigation-subItem" href="/docs/api/modules.html">Modules</a><a class="docs-navigation-subItem" href="/docs/api/operators.html">Operators</a><a class="docs-navigation-subItem" href="/docs/api/providers.html">Providers</a><a class="docs-navigation-subItem" href="/docs/api/compute.html">Compute</a><a class="docs-navigation-subItem" href="/docs/api/router.html">Router</a></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="#routing">Routing</a><ul><li><a href="#adding-some-tabs">Adding some tabs</a></li><li><a href="#introducing-the-router">Introducing the router</a></li><li><a href="#challenge">Challenge</a></li></ul></li></ul></div></div><div class="docs-doc"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/docs/docs/tutorial/routing.md" target="_new">Edit on Github</a></div><div class="docs-doc-content"><div style="background-color:#DD4A68;color:#fff;margin:10px;padding:5px 10px;border-radius:3px;">Docs are still being written and might not be up to date with API</div><h1 id="routing">Routing</h1><p><strong>Load up chapter 10</strong> - <a href="10">Preview</a></p><p>Now that our tutorial UI gets more complex it is a good idea to separate it a little bit. We want a home tab and a repos tab. Our two repos should load when we click the repos tab or hit the url directly.</p><h2 id="adding-some-tabs">Adding some tabs</h2><p>Let us introduce the tabs first. We will just shove everything into our one component. Normally you would split this up into multiple components of course. You would probably also use JavaScript to map over a list of tabs or something similar, but let us be explicit now. Please change <em>./src/components/App/index.js</em> to:</p><pre><code class="language-js">import React from &#x27;react&#x27;
import {connect} from &#x27;cerebral/react&#x27;
import {state, signal} from &#x27;cerebral/tags&#x27;
import Toast from &#x27;../Toast&#x27;

export default connect({
  title: state`title`,
  subTitle: state`subTitle`,
  repos: state`repos`,
  activeTab: state`activeTab`,
  homeRouted: signal`homeRouted`,
  reposRouted: signal`reposRouted`
},
  function App (props) {
    return (
      &lt;div className=&quot;o-container o-container--medium&quot;&gt;
        &lt;h1&gt;{props.title}&lt;/h1&gt;
        &lt;h3&gt;{props.subTitle}&lt;/h3&gt;
        &lt;div className=&quot;c-tabs&quot;&gt;
          &lt;div className=&quot;c-tabs__headings&quot;&gt;
            &lt;div
              onClick={(event) =&gt; props.homeRouted()}
              className={`c-tab-heading ${
                props.activeTab === &#x27;home&#x27; ? &#x27;c-tab-heading--active&#x27; : &#x27;&#x27;
              }`}
            &gt;
              Home
            &lt;/div&gt;
            &lt;div
              onClick={(event) =&gt; props.reposRouted()}
              className={`c-tab-heading ${
                props.activeTab === &#x27;repos&#x27; ? &#x27;c-tab-heading--active&#x27; : &#x27;&#x27;
              }`}
            &gt;
              Repos
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;br /&gt;
          &lt;div className={`c-tabs__tab ${
            props.activeTab === &#x27;home&#x27; ? &#x27;c-tabs__tab--active&#x27; : &#x27;&#x27;
          }`}&gt;
            &lt;h5&gt;Home page content&lt;/h5&gt;
          &lt;/div&gt;
          &lt;div className={`c-tabs__tab ${
            props.activeTab === &#x27;repos&#x27; ? &#x27;c-tabs__tab--active&#x27; : &#x27;&#x27;
          }`}&gt;
            &lt;ul&gt;
              {Object.keys(props.repos).map((repoKey, index) =&gt; {
                const name = props.repos[repoKey].name
                const count = props.repos[repoKey].stargazers_count

                return (
                  &lt;li key={index}&gt;
                    {name} ({count})
                  &lt;/li&gt;
                )
              })}
            &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/div&gt;
        &lt;Toast /&gt;
      &lt;/div&gt;
    )
  }
)</code></pre><p>We also need to add new state in <em>./src/index.js</em>:</p><pre><code class="language-js">...
{
  title: &#x27;Hello from Cerebral!&#x27;,
  subTitle: &#x27;Working on my state management&#x27;,
  toast: null,
  repos: {},
  activeTab: &#x27;home&#x27;  
}
...</code></pre><p>And update the signals as well:</p><pre><code class="language-js">...
{
  homeRouted: [
    set(state`activeTab`, &#x27;home&#x27;)
  ],
  reposRouted: [
    set(state`activeTab`, &#x27;repos&#x27;),
    ...showToast(string`Loading data for repo: ${input`repo`}`),
    [
      getRepo(&#x27;cerebral&#x27;),
      getRepo(&#x27;addressbar&#x27;)
    ],
    when(input`error`), {
      true: [
        ...showToast(string`Error: ${input`error`}`, 5000)
      ],
      false: [
        set(state`repos.cerebral`, input`cerebral`),
        set(state`repos.addressbar`, input`addressbar`),
        ...showToast(string`The repos have ${starsCount} stars`, 5000)    
      ]
    }
  ]
}
...</code></pre><p>Now you can testdrive your changes. You should see the first tab activated. Now go to debugger and change <em>activeTab</em> state to ‘repos’ and you will see the second tab. If you click the tabs you will actually trigger the signals which appears in the debugger. Nice! But what has this to do with Routing?</p><h2 id="introducing-the-router">Introducing the router</h2><p>Traditional routers is a wrapper around your components and they manipulate what components to display based on the url. That is not how routing works in Cerebral. In Cerebral you connect urls to signals. So:</p><ol><li>A url is hit or changed</li><li>The respective signal is triggered putting your application in the correct state</li><li>The components now renders based on the state of the application</li></ol><p>This is a really good thing because most route changes requires quite a few state changes and side effects, like server requests, to be run. This is exactly what signals do so well.</p><p>Let us introduce <strong>cerebral-router</strong> to our project by adding an import to the top of our <em>./src/index.js</em>:</p><pre><code class="language-js">import Router from &#x27;cerebral-router&#x27;</code></pre><p>And go ahead by doing the router config as follows inside the controller:</p><pre><code class="language-js">...
const controller = Controller({
  devtools: Devtools(),
  router: Router({
    routes: {
      &#x27;/&#x27;: &#x27;homeRouted&#x27;,
      &#x27;/repos&#x27;: &#x27;reposRouted&#x27;
    },
    onlyHash: true // Use hash urls
  })
  ...
})
...</code></pre><p>As you can see, defining <em>routes</em> is as easy as linking them to <em>signals</em>. Now go to your browsers addressbar and enter <em>localhost/#/repos</em> and voilà the reposRouted signal gets called. And it also works the other way around. When you now click your tabs the url will also update!</p><h2 id="challenge">Challenge</h2><p>Go to your browsers addressbar and enter an invalid route like: localhost/#/<em>foo</em> and press Enter. Now check the console! The challenge is to add another route which catches those <em>unknown</em> routes, runs a signal and display a toast with an error. You probably need some more docs on the router to make this work.</p><p><strong>Want to dive deeper?</strong> - <a href="../in_depth/routing.html">Go in depth</a>, or move on with the tutorial</p></div></div></div><div class="docs-footer"><div class="docs-footer-column"><div class="docs-footer-header">ORGANIZATION</div><a class="docs-footer-link" href="https://github.com/cerebral/cerebral/graphs/contributors" target="_new">Contributors</a><a class="docs-footer-link" href="http://www.webpackbin.com" target="_new">www.webpackbin.com</a><a class="docs-footer-link" href="http://www.christianalfoni.com" target="_new">www.christianalfoni.com</a></div><div class="docs-footer-column"><div class="docs-footer-header">ARTICLES AND USEFUL LINKS</div><a class="docs-footer-link" href="http://medium.com/p/5793c08db2cc" target="_new">The story of Cerebral</a><a class="docs-footer-link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730" target="_new">An unlikely success story</a></div><div class="docs-footer-column"><div class="docs-footer-header">HELP</div><a class="docs-footer-link" href="https://github.com/cerebral/cerebral" target="_new">Cerebral github repo</a><a class="docs-footer-link" href="https://discord.gg/0kIweV4bd2bwwsvH" target="_new">Discoard chat</a></div></div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/scroll-detect.js"></script>
  </body>
</html>
