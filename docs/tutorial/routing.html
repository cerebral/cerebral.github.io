<!DOCTYPE html>
<html>
  <head>
    <title>Cerebral Docs</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<link rel="stylesheet" href="/main.css" />
<link rel="stylesheet" href="/prism.css" />
<link rel="stylesheet" href="/docs.css" />
  </head>
  <body>
    <div id="app"><div class="docs-container"><div id="navigation" class="docs-navigation"><ul class="docs-navigation-menu"><li class="docs-navigation-item"><a href="/docs/get_started">get started</a><div class="underline"></div></li><li class="docs-navigation-item active"><a href="/docs/tutorial">tutorial</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/how_to">how to</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/migration">migration</a><div class="underline"></div></li><li class="docs-navigation-item"><a href="/docs/api">api</a><div class="underline"></div></li></ul><div class="docs-search"><input type="text" id="search-docs" placeholder="search..."/><div id="search-result" class="docs-search-result"></div></div><div class="docs-icons"><a href="https://github.com/cerebral/cerebral" class="docs-icon" target="_new"><div class="docs-icon-github"></div>github repo</a><a href="https://discord.gg/0kIweV4bd2bwwsvH" class="docs-icon" target="_new"><div class="docs-icon-discord"></div>chat</a></div></div><div id="navigation-mobile" class="docs-navigation mobile"><div id="hamburger" class="docs-navigation-hamburger">☰</div><div class="docs-navigation-title mobile">tutorial</div><div class="docs-navigation-float mobile"><ul class="docs-navigation-menu mobile"><li class="docs-navigation-item mobile"><a href="/docs/get_started">get started</a></li><li class="docs-navigation-item active mobile"><a href="/docs/tutorial">tutorial</a><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/tutorial/index.html">Introduction</a></li><li><a href="/docs/tutorial/define_state.html">Define State</a></li><li><a href="/docs/tutorial/render_state.html">Render state</a></li><li><a href="/docs/tutorial/update_state.html">Update state</a></li><li><a href="/docs/tutorial/chains.html">Chains</a></li><li><a href="/docs/tutorial/actions.html">Actions</a></li><li><a href="/docs/tutorial/async_actions.html">Async actions</a></li><li><a href="/docs/tutorial/paths.html">Paths</a></li><li><a href="/docs/tutorial/compute_state.html">Compute state</a></li><li class="active"><a href="/docs/tutorial/routing.html">Routing</a><ul><li><a href="#adding-some-tabs">Adding some tabs</a></li><li><a href="#introducing-the-router">Introducing the router</a></li><li><a href="#challenge">Challenge</a></li></ul></li><li><a href="/docs/tutorial/modules.html">Modules</a></li></ul></div></div></li><li class="docs-navigation-item mobile"><a href="/docs/how_to">how to</a></li><li class="docs-navigation-item mobile"><a href="/docs/migration">migration</a></li><li class="docs-navigation-item mobile"><a href="/docs/api">api</a></li></ul></div></div><div class="docs-content"><div class="docs-toc"><div class="docs-toc-content"><div><strong>Table of contents</strong></div><ul><li><a href="/docs/tutorial/index.html">Introduction</a></li><li><a href="/docs/tutorial/define_state.html">Define State</a></li><li><a href="/docs/tutorial/render_state.html">Render state</a></li><li><a href="/docs/tutorial/update_state.html">Update state</a></li><li><a href="/docs/tutorial/chains.html">Chains</a></li><li><a href="/docs/tutorial/actions.html">Actions</a></li><li><a href="/docs/tutorial/async_actions.html">Async actions</a></li><li><a href="/docs/tutorial/paths.html">Paths</a></li><li><a href="/docs/tutorial/compute_state.html">Compute state</a></li><li class="active"><a href="/docs/tutorial/routing.html">Routing</a><ul><li><a href="#adding-some-tabs">Adding some tabs</a></li><li><a href="#introducing-the-router">Introducing the router</a></li><li><a href="#challenge">Challenge</a></li></ul></li><li><a href="/docs/tutorial/modules.html">Modules</a></li></ul></div></div><div class="docs-doc"><div class="docs-doc-content"><div class="docs-doc-edit"><a href="https://github.com/cerebral/cerebral/tree/master/docs/docs/docs/tutorial/routing.md" target="_new">Edit on Github</a></div><h1 id="routing">Routing</h1><p><strong>Before you start,</strong> <a href="https://webpackbin-prod.firebaseapp.com/#/bins/-KdBeIDJoRv0PQlF7uWU" target="new">load this BIN on Webpackbin</a></p><p>Now that our tutorial UI gets more complex it is a good idea to separate it a little bit. We want a home tab and a repos tab. Our two repos should load when we click the repos tab or hit the url directly.</p><h2 id="adding-some-tabs">Adding some tabs</h2><p>Let us introduce the tabs first. We will just shove everything into our one component. Normally you would split this up into multiple components of course. You would probably also use JavaScript to map over a list of tabs or something similar, but let us be explicit now. Please change <em>App.js</em> to:</p><pre><code class="language-js">import React from &#x27;react&#x27;
import {connect} from &#x27;cerebral/react&#x27;
import {state, signal} from &#x27;cerebral/tags&#x27;
import Toast from &#x27;./Toast&#x27;

export default connect({
  title: state`title`,
  subTitle: state`subTitle`,
  repos: state`repos`,
  activeTab: state`activeTab`,
  homeClicked: signal`homeClicked`,
  reposClicked: signal`reposClicked`
},
  function App ({
    title,
    subTitle,
    repos,
    activeTab,
    homeClicked,
    reposClicked
  }) {
    return (
      &lt;div&gt;
        &lt;h1&gt;{title}&lt;/h1&gt;
        &lt;h2&gt;{subTitle}&lt;/h2&gt;
        &lt;div&gt;
          &lt;div className=&#x27;tabs&#x27;&gt;
            &lt;div
              onClick={() =&gt; homeClicked()}
              className={`tab ${
                activeTab === &#x27;home&#x27; ? &#x27;tab-active&#x27; : &#x27;&#x27;
              }`}
            &gt;
              Home
            &lt;/div&gt;
            &lt;div
              onClick={() =&gt; reposClicked()}
              className={`tab ${
                activeTab === &#x27;repos&#x27; ? &#x27;tab-active&#x27; : &#x27;&#x27;
              }`}
            &gt;
              Repos
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;br /&gt;
          {
            activeTab === &#x27;home&#x27; ? (
              &lt;div&gt;
                Some awesome home page content
              &lt;/div&gt;   
            ) : null
          }
          {
            activeTab === &#x27;repos&#x27; ? (
              &lt;div&gt;
                &lt;ul&gt;
                  {Object.keys(repos).map((repoKey, index) =&gt; {
                    const name = repos[repoKey].name
                    const count = repos[repoKey].stargazers_count

                    return (
                      &lt;li key={index}&gt;
                        {name} ({count})
                      &lt;/li&gt;
                    )
                  })}
               &lt;/ul&gt;
              &lt;/div&gt;   
            ) : null
          }
        &lt;/div&gt;
        &lt;Toast /&gt;
      &lt;/div&gt;
    )
  }
)</code></pre><p>We also need to add new state in <em>main.js</em>:</p><pre><code class="language-js">...
{
  title: &#x27;Hello from Cerebral!&#x27;,
  subTitle: &#x27;Working on my state management&#x27;,
  toast: null,
  repos: {},
  activeTab: &#x27;home&#x27;
}
...</code></pre><p>And update the signals as well:</p><pre><code class="language-js">...
{
  homeClicked: [
    set(state`activeTab`, &#x27;home&#x27;)
  ],
  reposClicked: [
    set(state`activeTab`, &#x27;repos&#x27;),
    ...showToast(string`Loading data for repo: ${props`repo`}`),
    [
      getRepo(&#x27;cerebral&#x27;),
      getRepo(&#x27;addressbar&#x27;)
    ],
    when(props`error`), {
      &#x27;true&#x27;: [
        ...showToast(string`Error: ${props`error`}`, 5000, &#x27;error&#x27;)
      ],
      &#x27;false&#x27;: [
        set(state`repos.cerebral`, props`cerebral`),
        set(state`repos.addressbar`, props`addressbar`),
        ...showToast(string`The repos have ${starsCount} stars`, 5000, &#x27;success&#x27;)    
      ]
    }
  ]
}
...</code></pre><p>Now you can test-drive your changes. You should see the first tab activated. Now go to the debugger and change <em>activeTab</em> state to ‘repos’ and you will see the second tab. If you click the tabs you will actually trigger the signals which appear in the debugger. Nice! But what has this to do with Routing?</p><h2 id="introducing-the-router">Introducing the router</h2><p>Traditional routers is a wrapper around your components and they manipulate what components to display based on the URL. That is not how routing works in Cerebral. In Cerebral you connect URLs to signals. So:</p><ol><li>A URL is hit or changed</li><li>The respective signal is triggered putting your application in the correct state</li><li>The components now renders based on the state of the application</li></ol><p>This is a really good thing because most route changes require quite a few state changes and side effects, like server requests, to be run. This is exactly what signals do so well.</p><p>Let us introduce <strong>cerebral-router</strong> to our project by adding an import to the top of our <em>./src/index.js</em>:</p><pre><code class="language-js">import Router from &#x27;cerebral-router&#x27;</code></pre><p>And go ahead by doing the router config as follows inside the controller:</p><pre><code class="language-js">...
const controller = Controller({
  ...
  modules: {
    router: Router({
      routes: [
        {path: &#x27;/&#x27;, signal: &#x27;homeClicked&#x27;},
        {path: &#x27;/repos&#x27;, signal: &#x27;reposClicked&#x27;}
      ],
      onlyHash: true
    })
  },
  ...
})
...</code></pre><p>As you can see, defining <em>routes</em> is as easy as linking them to <em>signals</em>. When you save and load up the BIN again you can go to the addressbar and change the url to <strong>/#/repos</strong>. You will now see the signal triggers and the repos content is shown. This is exactly what happens when you click the tab as well.</p><h2 id="challenge">Challenge</h2><p>Go to your browsers addressbar and enter an invalid route like: localhost/#/<em>foo</em> and press Enter. Now check the log! The challenge is to add another route which catches those <em>unknown</em> routes, runs a signal and display a toast with an error. You probably need to read some more docs on the router to make this work.</p></div></div></div><div style="z-index:99;background-color:#DD4A68;color:#fff;padding:5px 10px;position:fixed;width:100%;bottom:0;left:0;">Docs are still being written and might not be up to date with API</div></div></div>
    
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.6.0/prism.min.js"></script>
<script src="/search.js"></script>
<script src="/mobile.js"></script>
  </body>
</html>
