<!DOCTYPE html><html class="ua_js_no" lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_api"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="wip">This documentation is about upcoming cerebral v2 which is currently is work in progress.<br/>Documentation might not always describe actual state of API.<br/>API itself could have some notable changes, though it shouldn't be critical.<br/>Feel free to contribute to docs by clicking Edit on Github link.</div><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5 row__col_sol row__col_mol"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio-check menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq1480003326068265"><div class="menu__group-title" role="presentation" id="uniq1480003326068265">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq1480003326068266" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Install</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_debugger"}}' role="menuitemradio" id="uniq1480003326068267" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_debugger.html">Debugger</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1480003326068268"><div class="menu__group-title" role="presentation" id="uniq1480003326068268">Tutorial</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/01_introduction"}}' role="menuitemradio" id="uniq1480003326068269" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/01_introduction.html">Introduction</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/02_define-state"}}' role="menuitemradio" id="uniq1480003326068270" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/02_define-state.html">ch01. Define State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/03_render-state"}}' role="menuitemradio" id="uniq1480003326068271" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/03_render-state.html">ch02. Render state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/04_update-state"}}' role="menuitemradio" id="uniq1480003326068272" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/04_update-state.html">ch03. Update state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/05_using-chains"}}' role="menuitemradio" id="uniq1480003326068273" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/05_using-chains.html">ch04. Chains</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/06_using-inputoutput"}}' role="menuitemradio" id="uniq1480003326068274" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/06_using-inputoutput.html">ch05. Actions</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/07_using-async-actions"}}' role="menuitemradio" id="uniq1480003326068275" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/07_using-async-actions.html">ch06. Async actions</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/08_using-paths"}}' role="menuitemradio" id="uniq1480003326068276" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/08_using-paths.html">ch07. Paths</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/09_compute_state"}}' role="menuitemradio" id="uniq1480003326068277" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/09_compute_state.html">ch08. Compute state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/10_providers"}}' role="menuitemradio" id="uniq1480003326068278" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/10_providers.html">ch09. Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/11_routing"}}' role="menuitemradio" id="uniq1480003326068279" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/11_routing.html">ch10. Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"tutorial/12_refactoring_modules"}}' role="menuitemradio" id="uniq1480003326068280" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../tutorial/12_refactoring_modules.html">ch11. Modules</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1480003326068281"><div class="menu__group-title" role="presentation" id="uniq1480003326068281">Concepts</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq1480003326068282" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq1480003326068283" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq1480003326068284" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq1480003326068285" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/05_exposing-state"}}' role="menuitemradio" id="uniq1480003326068286" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/05_exposing-state.html">Exposing state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1480003326068287"><div class="menu__group-title" role="presentation" id="uniq1480003326068287">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_community-tools"}}' role="menuitemradio" id="uniq1480003326068288" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_community-tools.html">Community tools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_organizing"}}' role="menuitemradio" id="uniq1480003326068289" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_adding-providers"}}' role="menuitemradio" id="uniq1480003326068290" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_adding-providers.html">Adding providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/04_compute-state"}}' role="menuitemradio" id="uniq1480003326068291" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/04_compute-state.html">Compute state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/05_connecting-to-components"}}' role="menuitemradio" id="uniq1480003326068292" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/05_connecting-to-components.html">Connecting to components</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/06_routing"}}' role="menuitemradio" id="uniq1480003326068293" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/06_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/07_constants"}}' role="menuitemradio" id="uniq1480003326068294" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/07_constants.html">Constants</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/08_server-side"}}' role="menuitemradio" id="uniq1480003326068295" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/08_server-side.html">Server side</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/09_testing"}}' role="menuitemradio" id="uniq1480003326068296" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/09_testing.html">Testing</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1480003326068297"><div class="menu__group-title" role="presentation" id="uniq1480003326068297">Migration</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"migration/01_start_migration"}}' role="menuitemradio" id="uniq1480003326068298" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../migration/01_start_migration.html">From 1.x to 2.x</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq1480003326068299"><div class="menu__group-title" role="presentation" id="uniq1480003326068299">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq1480003326068300" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_devtools"}}' role="menuitemradio" id="uniq1480003326068301" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_devtools.html">Devtools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_state"}}' role="menuitemradio" id="uniq1480003326068302" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_signals"}}' role="menuitemradio" id="uniq1480003326068303" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_connect"}}' role="menuitemradio" id="uniq1480003326068304" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_connect.html">Connect</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_modules"}}' role="menuitemradio" id="uniq1480003326068305" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/07_operators"}}' role="menuitemradio" id="uniq1480003326068306" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/07_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/08_providers"}}' role="menuitemradio" id="uniq1480003326068307" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/08_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/09_router"}}' role="menuitemradio" id="uniq1480003326068308" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/09_router.html">Router</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral/tree/master/packages/docs/content/api/07_operators.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="operators">Operators</h2>
<p class="paragraph">You can call operators to create actions for you. These actions will help you change state and control the flow of execution.</p>
<h3 class="heading heading_lvl_3" id="operator-tags">Operator tags</h3>
<p class="paragraph">When using operators you want to express dynamic behavior. For example changing some state based on the input. Operator tags helps you express this. There are three operator tags available, <strong>state</strong>, <strong>input</strong> and <strong>string</strong>.</p>
<p class="paragraph">There are two parts to operator tags. A target, and a template. The target tells the operator what to use the template for. And the template resolves to a string, for whatever purpose. Usually it is a path to the state tree, or some value on an input, but it could be anything.</p>
<p class="paragraph">For example:</p>
<pre><code class="code" class="lang-js">state<span class="token template-string" ><span class="token string" >`foo.bar`</span></span>
</code></pre>
<p class="paragraph">State is the target and &quot;foo.bar&quot; is the template. What this target and template is used for is decided by the operator.</p>
<p class="paragraph">Operator tags can also inline other operator tags. For example:</p>
<pre><code class="code" class="lang-js">state<span class="token template-string" ><span class="token string" >`users.${input`</span></span>userId<span class="token template-string" ><span class="token string" >`}`</span></span>
</code></pre>
<p class="paragraph">There is nothing magic about this, it is pure JavaScript and super helpful expressing your business logic.</p>
<h3 class="heading heading_lvl_3" id="state-operators">State operators</h3>
<p class="paragraph">The methods for changing state within actions is also available as operators. All state operators supports using both <strong>state</strong> and <strong>input</strong> operator tags as values.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>
  state<span class="token punctuation" >,</span>
  input<span class="token punctuation" >,</span>
  <span class="token keyword" >set</span><span class="token punctuation" >,</span>
  unset<span class="token punctuation" >,</span>
  merge<span class="token punctuation" >,</span>
  toggle<span class="token punctuation" >,</span>
  push<span class="token punctuation" >,</span>
  unshift<span class="token punctuation" >,</span>
  concat<span class="token punctuation" >,</span>
  pop<span class="token punctuation" >,</span>
  shift<span class="token punctuation" >,</span>
  splice
<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/operators'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >[</span>
  <span class="token comment" spellcheck="true">// Set some state</span>
  <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`foo.bar`</span></span><span class="token punctuation" >,</span> <span class="token boolean" >true</span><span class="token punctuation" >)</span>

  <span class="token comment" spellcheck="true">// Set some input</span>
  <span class="token keyword" >set</span><span class="token punctuation" >(</span>input<span class="token template-string" ><span class="token string" >`foo`</span></span><span class="token punctuation" >,</span> <span class="token boolean" >true</span><span class="token punctuation" >)</span>

  <span class="token comment" spellcheck="true">// Unset key from object</span>
  <span class="token function" >unset</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`users.user0`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Merge. Supports using template tags on merged values</span>
  <span class="token function" >merge</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`foo`</span></span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    bar<span class="token punctuation" >:</span> input<span class="token template-string" ><span class="token string" >`bar`</span></span><span class="token punctuation" >,</span>
    baz<span class="token punctuation" >:</span> state<span class="token template-string" ><span class="token string" >`baz`</span></span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Toggle a boolean value in your state</span>
  <span class="token function" >toggle</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`foo`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Push value to array</span>
  <span class="token function" >push</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`some.list`</span></span><span class="token punctuation" >,</span> <span class="token string" >'foo'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Concat value to array</span>
  <span class="token function" >concat</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`some.list`</span></span><span class="token punctuation" >,</span> <span class="token punctuation" >[</span><span class="token string" >'foo'</span><span class="token punctuation" >,</span> <span class="token string" >'bar'</span><span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Unshift value to array</span>
  <span class="token function" >unshift</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`some.list`</span></span><span class="token punctuation" >,</span> <span class="token string" >'foo'</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Pop value off array</span>
  <span class="token function" >pop</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`some.list`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Shift value off array</span>
  <span class="token function" >shift</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`some.list`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Splice array</span>
  <span class="token function" >splice</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`some.list`</span></span><span class="token punctuation" >,</span> <span class="token number" >0</span><span class="token punctuation" >,</span> <span class="token number" >2</span><span class="token punctuation" >)</span>
<span class="token punctuation" >]</span>
</code></pre>
<h3 class="heading heading_lvl_3" id="flow-control-operators">Flow control operators</h3>
<p class="paragraph">There are also operators that helps control the flow of execution.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>
  state<span class="token punctuation" >,</span>
  input<span class="token punctuation" >,</span>
  when<span class="token punctuation" >,</span>
  equals<span class="token punctuation" >,</span>
  wait<span class="token punctuation" >,</span>
  debounce
<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/operators'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >[</span>
  <span class="token comment" spellcheck="true">// Conditional truthy check of state or input</span>
  <span class="token function" >when</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`foo.isAwesome`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    <span class="token boolean" >true</span><span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    <span class="token boolean" >false</span><span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>
  <span class="token comment" spellcheck="true">// You can also pass your own function</span>
  <span class="token function" >when</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`foo.isAwesome`</span></span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span>value<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> value<span class="token punctuation" >.</span>length <span class="token operator" >===</span> <span class="token number" >3</span> <span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    <span class="token boolean" >true</span><span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    <span class="token boolean" >false</span><span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Based on value go down a specific path</span>
  <span class="token function" >equals</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`user.role`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    admin<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    user<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    otherwise<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span> <span class="token comment" spellcheck="true">// When no match</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Wait 200ms, then continue chain</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >wait</span><span class="token punctuation" >(</span><span class="token number" >200</span><span class="token punctuation" >,</span> <span class="token punctuation" >[</span>
    doSomething
  <span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

  <span class="token comment" spellcheck="true">// Hold action until 200ms has passed. If signal</span>
  <span class="token comment" spellcheck="true">// triggers again within 200ms the previous signal</span>
  <span class="token comment" spellcheck="true">// goes down "discarded" path, while new signal holds</span>
  <span class="token comment" spellcheck="true">// for 200ms. Typical typeahead functionality</span>
  <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >debounce</span><span class="token punctuation" >(</span><span class="token number" >200</span><span class="token punctuation" >,</span> <span class="token punctuation" >[</span>
    runThisAction
  <span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
<span class="token punctuation" >]</span>
</code></pre>
<h4 class="heading heading_lvl_4" id="debounce">debounce</h4>
<p class="paragraph">The <strong>debounce</strong> operator cancels out the existing call to the action returned when the signal triggers again within the milliseconds set. This is typically used with factories, for example to show notifications:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>debounce<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/operators'</span>

<span class="token keyword" >const</span> sharedDebounce <span class="token operator" >=</span> debounce<span class="token punctuation" >.</span><span class="token function" >share</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span>
<span class="token keyword" >function</span> <span class="token function" >showNotificationFactory</span><span class="token punctuation" >(</span>message<span class="token punctuation" >,</span> ms<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >function</span> <span class="token function" >showNotification</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    state<span class="token punctuation" >.</span><span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'notification'</span><span class="token punctuation" >,</span> message<span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>

  <span class="token keyword" >function</span> <span class="token function" >hideNotification</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    state<span class="token punctuation" >.</span><span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'notification'</span><span class="token punctuation" >,</span> <span class="token keyword" >null</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>

  <span class="token keyword" >return</span> <span class="token punctuation" >[</span>
    showNotification<span class="token punctuation" >,</span>
    <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >sharedDebounce</span><span class="token punctuation" >(</span>ms<span class="token punctuation" >,</span> <span class="token punctuation" >[</span>
      hideNotification
    <span class="token punctuation" >]</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">Wherever this <strong>showNofication</strong> factory is used, in whatever signal, it will cancel out any other. This makes sure that notifications are always shown at the set time, no matter what existing notification is already there.</p>
<h4 class="heading heading_lvl_4" id="when">when</h4>
<p class="paragraph">When used with a truth function, the <strong>when</strong> operator supports more then a single &quot;value&quot; argument. The truth function must come last:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>input<span class="token punctuation" >,</span> state<span class="token punctuation" >,</span> when<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/operators'</span>

<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token punctuation" >[</span>
  <span class="token function" >when</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`clients.$draft.key`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`key`</span></span><span class="token punctuation" >,</span>
    <span class="token punctuation" >(</span>draftKey<span class="token punctuation" >,</span> updatedKey<span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> draftKey <span class="token operator" >===</span> updatedKey
  <span class="token punctuation" >)</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    <span class="token boolean" >true</span><span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token comment" spellcheck="true">// Another person edited client, reset form to new value</span>
      <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`clients.$draft`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`value`</span></span><span class="token punctuation" >)</span>
    <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
    <span class="token boolean" >false</span><span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >]</span>
</code></pre>
<h3 class="heading heading_lvl_3" id="custom-operators">Custom operators</h3>
<p class="paragraph">You can easily create your own operators and use the operator tags. Here showing the implementation of <strong>set</strong></p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >setFactory</span><span class="token punctuation" >(</span>target<span class="token punctuation" >,</span> value<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >function</span> <span class="token keyword" >set</span><span class="token punctuation" >(</span>context<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// Returns an object with type of operator tag, the path</span>
    <span class="token comment" spellcheck="true">// it resolves to and any value it resolves to. So given</span>
    <span class="token comment" spellcheck="true">// state {foo: 'bar'}, the operator tag: state`foo` resolves</span>
    <span class="token comment" spellcheck="true">// to {target: 'state', path: 'foo', value: 'bar'}</span>
    <span class="token keyword" >const</span> targetTemplate <span class="token operator" >=</span> <span class="token function" >target</span><span class="token punctuation" >(</span>context<span class="token punctuation" >)</span>

    <span class="token comment" spellcheck="true">// We now check if the target is correct</span>
    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>targetTemplate<span class="token punctuation" >.</span>target <span class="token operator" >!==</span> <span class="token string" >'state'</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >throw</span> <span class="token keyword" >new</span> <span class="token class-name" >Error</span><span class="token punctuation" >(</span><span class="token string" >'You have to target state when merging'</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span>

    <span class="token comment" spellcheck="true">// Since we allow both using an operator tag or a hardcoded value</span>
    <span class="token comment" spellcheck="true">// we check if it is a function, which means it is an operator tag.</span>
    <span class="token comment" spellcheck="true">// Then we either grab the value from the operator tag or the value</span>
    <span class="token comment" spellcheck="true">// passed in</span>
    <span class="token keyword" >const</span> setValue <span class="token operator" >=</span> <span class="token keyword" >typeof</span> value <span class="token operator" >===</span> <span class="token string" >'function'</span> <span class="token operator" >?</span> <span class="token function" >value</span><span class="token punctuation" >(</span>context<span class="token punctuation" >)</span><span class="token punctuation" >.</span>value <span class="token punctuation" >:</span> value

    context<span class="token punctuation" >.</span>state<span class="token punctuation" >.</span><span class="token keyword" >set</span><span class="token punctuation" >(</span>targetTemplate<span class="token punctuation" >.</span>path<span class="token punctuation" >,</span> setValue<span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span>

  <span class="token keyword" >return</span> <span class="token keyword" >set</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">Custom operators often wants to extract paths, though not necessarily related to state or input. That is why we have operator tag <strong>string</strong>.</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span>string<span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/operators'</span>
<span class="token keyword" >import</span> showMessage <span class="token keyword" >from</span> <span class="token string" >'../factories/showMessage'</span>
<span class="token keyword" >import</span> starsCount <span class="token keyword" >from</span> <span class="token string" >'../computeds/starsCount'</span>
<span class="token punctuation" >[</span>
  <span class="token function" >showMessage</span><span class="token punctuation" >(</span>string<span class="token template-string" ><span class="token string" >`There are </span><span class="token interpolation" ><span class="token interpolation-punctuation punctuation" >${</span>starsCount<span class="token interpolation-punctuation punctuation" >}</span></span><span class="token string" > left`</span></span><span class="token punctuation" >)</span>
<span class="token punctuation" >]</span>
</code></pre>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral/graphs/contributors">Contributors</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.webpackbin.com">www.webpackbin.com</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.christianalfoni.com">www.christianalfoni.com</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://medium.com/p/5793c08db2cc">The story of Cerebral</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730">An unlikely success story</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral">Cerebral github repo</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://discord.gg/0kIweV4bd2bwwsvH">Discord chat</a></div></div></footer><script src="../js/scripts.min.js"></script></body></html>