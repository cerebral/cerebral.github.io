<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_get-started"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="wip">This documentation is about upcoming cerebral v2 which is currently is work in progress.<br/>Documentation might not always describe actual state of API.<br/>API itself could have some notable changes, though it shouldn't be critical.<br/>Feel free to contribute to docs by clicking Edit on Github link.</div><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5 row__col_sol row__col_mol"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio-check menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq14787857121301126"><div class="menu__group-title" role="presentation" id="uniq14787857121301126">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq14787857121301127" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Get started</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_store-state"}}' role="menuitemradio" id="uniq14787857121301128" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_store-state.html">Store State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/03_render-state"}}' role="menuitemradio" id="uniq14787857121301129" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/03_render-state.html">Exposing State to the View</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/04_render-challenge"}}' role="menuitemradio" id="uniq14787857121301130" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/04_render-challenge.html">Render challenge</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/05_update-state"}}' role="menuitemradio" id="uniq14787857121301131" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/05_update-state.html">Update state (Signals)</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/06_using-chains"}}' role="menuitemradio" id="uniq14787857121301132" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/06_using-chains.html">Using chains</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/07_using-inputoutput"}}' role="menuitemradio" id="uniq14787857121301133" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/07_using-inputoutput.html">Input and custom Actions</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/08_customaction-challenge"}}' role="menuitemradio" id="uniq14787857121301134" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/08_customaction-challenge.html">Custom action challenge</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/09_using-async-actions"}}' role="menuitemradio" id="uniq14787857121301135" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/09_using-async-actions.html">Using simple async actions</a></div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/10_using-paths"}}' role="menuitemradio" id="uniq14787857121301136" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/10_using-paths.html">Control flow using Path</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/11_async-challenge"}}' role="menuitemradio" id="uniq14787857121301137" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/11_async-challenge.html">Async Challenge</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/12_compute_state"}}' role="menuitemradio" id="uniq14787857121301138" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/12_compute_state.html">Compute State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/13_providers"}}' role="menuitemradio" id="uniq14787857121301139" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/13_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/14_routing"}}' role="menuitemradio" id="uniq14787857121301140" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/14_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/15_routing_challenge"}}' role="menuitemradio" id="uniq14787857121301141" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/15_routing_challenge.html">Routing Challenge</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/16_refactoring_modules"}}' role="menuitemradio" id="uniq14787857121301142" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/16_refactoring_modules.html">Refactoring using Modules</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14787857121301143"><div class="menu__group-title" role="presentation" id="uniq14787857121301143">Concepts</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq14787857121301144" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq14787857121301145" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq14787857121301146" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq14787857121301147" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/05_exposing-state"}}' role="menuitemradio" id="uniq14787857121301148" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/05_exposing-state.html">Exposing state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14787857121301149"><div class="menu__group-title" role="presentation" id="uniq14787857121301149">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_community-tools"}}' role="menuitemradio" id="uniq14787857121301150" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_community-tools.html">Community tools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_organizing"}}' role="menuitemradio" id="uniq14787857121301151" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_adding-providers"}}' role="menuitemradio" id="uniq14787857121301152" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_adding-providers.html">Adding providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_devtools"}}' role="menuitemradio" id="uniq14787857121301153" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_devtools.html">Devtools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/05_compute-state"}}' role="menuitemradio" id="uniq14787857121301154" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/05_compute-state.html">Compute state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/06_connecting-to-components"}}' role="menuitemradio" id="uniq14787857121301155" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/06_connecting-to-components.html">Connecting to components</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/07_routing"}}' role="menuitemradio" id="uniq14787857121301156" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/07_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/08_constants"}}' role="menuitemradio" id="uniq14787857121301157" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/08_constants.html">Constants</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/09_server-side"}}' role="menuitemradio" id="uniq14787857121301158" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/09_server-side.html">Server side</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/10_testing"}}' role="menuitemradio" id="uniq14787857121301159" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/10_testing.html">Testing</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14787857121301160"><div class="menu__group-title" role="presentation" id="uniq14787857121301160">Migration</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"migration/01_start_migration"}}' role="menuitemradio" id="uniq14787857121301161" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../migration/01_start_migration.html">From 1.x to 2.x</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14787857121301162"><div class="menu__group-title" role="presentation" id="uniq14787857121301162">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq14787857121301163" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_state"}}' role="menuitemradio" id="uniq14787857121301164" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_signals"}}' role="menuitemradio" id="uniq14787857121301165" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_modules"}}' role="menuitemradio" id="uniq14787857121301166" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_operators"}}' role="menuitemradio" id="uniq14787857121301167" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_providers"}}' role="menuitemradio" id="uniq14787857121301168" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/07_connect"}}' role="menuitemradio" id="uniq14787857121301169" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/07_connect.html">Connect</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/08_router"}}' role="menuitemradio" id="uniq14787857121301170" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/08_router.html">Router</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral-website/blob/v3/content/get-started/10_using-paths.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="10-control-flow-using-path">10: Control flow using Path</h2>
<p class="paragraph"><code class="code">npm run ch09</code></p>
<p class="paragraph">In the chapter before we were introducing async actions and we have learned that we can write async actions that just behave like an sync action in the chain.
But what about the following scenario: User gets data async from a server, server responds with an error, what now? To handle not only the so called <em>Happy Path</em> we should also allow our signals to branch out into a different flow (which is just another chain of actions and operators) depending on the result of the async action.
So let us build that scenario introducing <em>cerebral-http-provider</em>. <em>cerebral-http-provider</em> is a simple http-provider which enables you to request data from servers.  The concept of <strong>Providers</strong> will be covered in more detail in the next chapter. As well we took the chance to spice up the tutorial a bit and also include the http-provider plus an action already using it. 
So please go ahead and <strong>do a</strong> <code class="code">npm run ch10_1</code> <strong>before you dive into the following steps</strong>.</p>
<h3 class="heading heading_lvl_3" id="a-few-words-about-the-work-done">A few words about the work done</h3>
<p class="paragraph">If you check out the application now you will see another input-field and a button.
By default this button will query the github api to get information about the cerebral-project.
If you press this button you should see some information as a <em>Toast</em> -message.
Nice but what if we change the input from <em>cerebral</em> to <em>doesnotexist</em> and again query the server by pressing the button? Well we still see a toast-message with now some misleading information (it looks ok at first sight). But the console (or network tab in the devtools of your browser) will reveal that something is going wrong.
Lets call the concept of <strong>Paths</strong> to the rescue!</p>
<p class="paragraph">A simple signal using paths and a sample async action named <em>getData</em> could look like this:</p>
<pre><code class="code" class="lang-js">signals<span class="token punctuation" >:</span>
getServerData<span class="token punctuation" >:</span><span class="token punctuation" >[</span>
getData<span class="token punctuation" >,</span> 
  <span class="token punctuation" >{</span>
  success<span class="token punctuation" >:</span><span class="token punctuation" >[</span>processResults<span class="token punctuation" >,</span> showSuccessMessage<span class="token punctuation" >]</span><span class="token punctuation" >,</span> 
  error<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>showErrorMessage<span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
<span class="token punctuation" >]</span>
</code></pre>
<p class="paragraph">Whereas <em>success:</em> and <em>error</em> are our <strong>Paths</strong></p>
<p class="paragraph">Well that would be cool, let us implement it into our existing <em>getRepoInfoClicked</em> - signal inside our controller:</p>
<pre><code class="code" class="lang-js"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
    getRepoInfoClicked<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`repoName`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`value`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>

       <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'Loading Data for repo: @{repoName}'</span><span class="token punctuation" >,</span> <span class="token number" >2000</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
       GetData<span class="token punctuation" >,</span>
       <span class="token punctuation" >{</span>
          success<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
            <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`data`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`result`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
            <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'How cool is that. @{repoName} has @{data.subscribers_count} subscribers and @{data.stargazers_count} stars!'</span><span class="token punctuation" >,</span> <span class="token number" >5000</span><span class="token punctuation" >,</span>  <span class="token string" >"success"</span><span class="token punctuation" >)</span>
         <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
         error<span class="token punctuation" >:</span> <span class="token punctuation" >[</span><span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`data`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`result`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span> 
         <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'Ooops something went wrong: @{data.message}'</span><span class="token punctuation" >,</span> <span class="token number" >5000</span><span class="token punctuation" >,</span> <span class="token string" >"error"</span><span class="token punctuation" >)</span><span class="token punctuation" >]</span>
        <span class="token punctuation" >}</span>

    <span class="token punctuation" >]</span>
<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p class="paragraph">As you can see you can config as many paths as you like. Just make sure to add the <em>,{...}</em> - block after the async action which controls them.
And in our GetData - action we need to output  to different <strong>Paths</strong> now as follows:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >GetData</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>input<span class="token punctuation" >,</span> state<span class="token punctuation" >,</span> http<span class="token punctuation" >,</span> path<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> http<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token string" >"/repos/cerebral/"</span> <span class="token operator" >+</span> input<span class="token punctuation" >.</span>value<span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token function" >then</span><span class="token punctuation" >(</span>response <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> path<span class="token punctuation" >.</span><span class="token function" >success</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
        result<span class="token punctuation" >:</span> response<span class="token punctuation" >.</span>result
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >.</span><span class="token keyword" >catch</span><span class="token punctuation" >(</span>error <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> path<span class="token punctuation" >.</span><span class="token function" >error</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
        result<span class="token punctuation" >:</span> error<span class="token punctuation" >.</span>result
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">As you can see using <em>path</em> we can tell Cerebral which Path it should take next when the promise resolves.</p>
<p class="paragraph">Now when you check out the application do you discover another candidate for using <strong>Path</strong> ?
Did you recognise that the message <em>Loading Data for repo...</em> is blocking the full process for 2 secs?
Sometimes it would be quite cool to indicate to Cerebral that actions could get executed in parallel without waiting for eachother to finish. Relax and take a sip from your coffee or beer, Cerebral has you covered!
Replace your Signal with the following snippet:</p>
<pre><code class="code" class="lang-js"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
  getRepoInfoClicked<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
    <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`repoName`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`value`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
    <span class="token punctuation" >[</span>
      <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'Loading Data for repo: @{repoName}'</span><span class="token punctuation" >,</span> <span class="token number" >2000</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      GetData<span class="token punctuation" >,</span>
      <span class="token punctuation" >{</span>
        success<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
          <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`data`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`result`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
          <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'How cool is that. @{repoName} has @{data.subscribers_count} subscribers and @{data.stargazers_count} stars!'</span><span class="token punctuation" >,</span> <span class="token number" >4000</span><span class="token punctuation" >,</span> <span class="token string" >"success"</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
        error<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
          <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`data`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`result`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
          <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'Ooops something went wrong: @{data.message}'</span><span class="token punctuation" >,</span> <span class="token number" >4000</span><span class="token punctuation" >,</span> <span class="token string" >"error"</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >]</span>
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p class="paragraph">What is happening here? Did you recognise the additional <strong>[</strong> and <strong>]</strong> Well whenever Cerebral encounters an Array in a Array  <strong>[action1,[action2,action3],action4]</strong> it will start the actions within that array in parallel, so after action1 finishes action2 &amp; action3 are executed in parallel. And after those two guys finsihed action4 will be executed.Really cool! We can control flow now and even tell Cerebral to execute Actions/Operators in parallel by just using JS-Arrays and Objects. So by just reading the Signals one can get a good understanding what the application will do. And don&#39;t forget, there is also the debugger reflecting state-changes and even displaying the <strong>Paths</strong> which were chosen.</p>
<p class="paragraph">As you maybe have recognised the <em>Loading Data for repo ...</em>-Message doesn&#39;t appear anymore. Well we should be able to explain that already. It is because we have introduced the additional <em>[</em> and <em>]</em> so everything inside this chain gets executed in parallel. That is also true for resetting our messages. So our message now basically gets set and resetted immediately. You may check the debugger to see this as well.
Another little issue with the current toast-method we are currently using: If we ouput &quot;Loading Data...&quot; and set it to 4 secs, but the server is really slow and it takes 20 secs, the message would disappear way too early.</p>
<p class="paragraph">Let us fix both issues by using the following code:</p>
<pre><code class="code" class="lang-js"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
    getRepoInfoClicked<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`repoName`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`value`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'Loading Data for repo: @{repoName}'</span><span class="token punctuation" >,</span> <span class="token number" >0</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      GetData<span class="token punctuation" >,</span>
      <span class="token punctuation" >{</span>
        success<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
          <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`data`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`result`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
          <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'How cool is that. @{repoName} has @{data.subscribers_count} subscribers and @{data.stargazers_count} stars!'</span><span class="token punctuation" >,</span> <span class="token number" >0</span><span class="token punctuation" >,</span> <span class="token string" >"success"</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >]</span><span class="token punctuation" >,</span>
        error<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
          <span class="token keyword" >set</span><span class="token punctuation" >(</span>state<span class="token template-string" ><span class="token string" >`data`</span></span><span class="token punctuation" >,</span> input<span class="token template-string" ><span class="token string" >`result`</span></span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
          <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'Ooops something went wrong: @{data.message}'</span><span class="token punctuation" >,</span> <span class="token number" >0</span><span class="token punctuation" >,</span> <span class="token string" >"error"</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >]</span>
      <span class="token punctuation" >}</span>
      <span class="token punctuation" >,</span>
      <span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token string" >'Load Data finished'</span><span class="token punctuation" >,</span> <span class="token number" >2000</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >]</span>
<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p class="paragraph">Whereas the 0 in <code class="code">...showToast(&#39;Loading Data for repo: @{repoName}&#39;, 0)</code> tells the Factory to not use a promise (for removing the toast) so it leaves the toast there as long as for example <code class="code">...showToast(&#39;Load Data finished&#39;, 2000)</code> gets called. So a 0 means: Hey i&#39;m a grouped toast, leave me there and a value x &gt; 0  means that it gets removed automatically by our async action after x milliseconds together with all the toasts before that where grouped by using the 0.
This enables nice grouped messages which integrates seamlessy into the Cerebral Action flow without blocking it.</p>
<p class="paragraph">To make this happen we need to adjust the <em>showToast(..)</em> - Factory to return a <strong>Path-Chain</strong> or just the action depending on the value of the function parameter <em>milliseconds</em>.
Don&#39;t worry now if that code still looks a bit alien to you. It also shows off the power of using <strong>Factories</strong></p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> showToast <span class="token punctuation" >(</span>message<span class="token punctuation" >,</span> milliseconds<span class="token punctuation" >,</span> type<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >var</span> isAsync <span class="token operator" >=</span> milliseconds <span class="token operator" >||</span> <span class="token punctuation" >(</span>message <span class="token operator" >&amp;&amp;</span> milliseconds <span class="token operator" >===</span> undefined<span class="token punctuation" >)</span> <span class="token operator" >||</span> <span class="token punctuation" >(</span>message <span class="token operator" >===</span> undefined <span class="token operator" >&amp;&amp;</span> milliseconds <span class="token operator" >===</span> undefined<span class="token punctuation" >)</span>
  <span class="token keyword" >function</span> action <span class="token punctuation" >(</span><span class="token punctuation" >{</span>input<span class="token punctuation" >,</span> state<span class="token punctuation" >,</span> path<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token comment" spellcheck="true">// api sugar to make showToast(2000), showToast() work</span>
    <span class="token keyword" >let</span> ms <span class="token operator" >=</span> <span class="token number" >0</span>
    <span class="token keyword" >let</span> msg <span class="token operator" >=</span> <span class="token string" >''</span>
    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>message <span class="token operator" >&amp;&amp;</span> milliseconds <span class="token operator" >===</span> undefined<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      ms <span class="token operator" >=</span> message
      msg <span class="token operator" >=</span> <span class="token string" >''</span>
    <span class="token punctuation" >}</span> <span class="token keyword" >else</span> <span class="token keyword" >if</span> <span class="token punctuation" >(</span>milliseconds<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      ms <span class="token operator" >=</span> milliseconds
    <span class="token punctuation" >}</span> <span class="token keyword" >else</span> <span class="token keyword" >if</span> <span class="token punctuation" >(</span>message <span class="token operator" >===</span> undefined <span class="token operator" >&amp;&amp;</span> milliseconds <span class="token operator" >===</span> undefined<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      ms <span class="token operator" >=</span> <span class="token number" >5000</span>
    <span class="token punctuation" >}</span>
    msg <span class="token operator" >=</span> message <span class="token operator" >||</span> input<span class="token punctuation" >.</span>value
    <span class="token comment" spellcheck="true">// replace the @{...} matches with current state value</span>
    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>msg<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >let</span> reg <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >RegExp</span><span class="token punctuation" >(</span><span class="token regex" >/@{.*?}/g</span><span class="token punctuation" >)</span>
      <span class="token keyword" >var</span> matches <span class="token operator" >=</span> msg<span class="token punctuation" >.</span><span class="token function" >match</span><span class="token punctuation" >(</span>reg<span class="token punctuation" >)</span>
      <span class="token keyword" >if</span> <span class="token punctuation" >(</span>matches<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        matches<span class="token punctuation" >.</span><span class="token function" >forEach</span><span class="token punctuation" >(</span>m <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
          <span class="token keyword" >let</span> cleanedPath <span class="token operator" >=</span> m<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token string" >'@{'</span><span class="token punctuation" >,</span> <span class="token string" >''</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token string" >'}'</span><span class="token punctuation" >,</span> <span class="token string" >''</span><span class="token punctuation" >)</span>
          msg <span class="token operator" >=</span> msg<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span>m<span class="token punctuation" >,</span> state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span>cleanedPath<span class="token punctuation" >)</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >}</span>
    <span class="token keyword" >let</span> newMsg <span class="token operator" >=</span> <span class="token punctuation" >{</span>
      msg<span class="token punctuation" >:</span> msg<span class="token punctuation" >,</span>
      type<span class="token punctuation" >:</span> type<span class="token punctuation" >,</span>
      timestamp<span class="token punctuation" >:</span> Date<span class="token punctuation" >.</span><span class="token function" >now</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      id<span class="token punctuation" >:</span> Date<span class="token punctuation" >.</span><span class="token function" >now</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >+</span> <span class="token string" >'_'</span> <span class="token operator" >+</span> Math<span class="token punctuation" >.</span><span class="token function" >floor</span><span class="token punctuation" >(</span>Math<span class="token punctuation" >.</span><span class="token function" >random</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >*</span> <span class="token number" >10000</span><span class="token punctuation" >)</span><span class="token punctuation" >,</span>
      grouped<span class="token punctuation" >:</span> <span class="token operator" >!</span>isAsync
    <span class="token punctuation" >}</span>
    state<span class="token punctuation" >.</span><span class="token function" >unshift</span><span class="token punctuation" >(</span><span class="token string" >'toast.messages'</span><span class="token punctuation" >,</span> newMsg<span class="token punctuation" >)</span>
    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>isAsync<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >return</span> <span class="token keyword" >new</span> <span class="token class-name" >Promise</span><span class="token punctuation" >(</span><span class="token keyword" >function</span> <span class="token punctuation" >(</span>resolve<span class="token punctuation" >,</span> reject<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        window<span class="token punctuation" >.</span><span class="token function" >setTimeout</span><span class="token punctuation" >(</span><span class="token keyword" >function</span> <span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
          <span class="token function" >resolve</span><span class="token punctuation" >(</span>path<span class="token punctuation" >.</span><span class="token function" >timeout</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
            id<span class="token punctuation" >:</span> newMsg<span class="token punctuation" >.</span>id
          <span class="token punctuation" >}</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >,</span> ms<span class="token punctuation" >)</span>
      <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
    <span class="token punctuation" >}</span>
  <span class="token punctuation" >}</span>
  action<span class="token punctuation" >.</span>displayName <span class="token operator" >=</span> <span class="token string" >'showToast'</span>
  <span class="token keyword" >if</span> <span class="token punctuation" >(</span><span class="token operator" >!</span>isAsync<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token punctuation" >[</span>action<span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >[</span>action<span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
    timeout<span class="token punctuation" >:</span> <span class="token punctuation" >[</span>
      removeToast
    <span class="token punctuation" >]</span>
  <span class="token punctuation" >}</span>
  <span class="token punctuation" >]</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">As you can see we return now either just the action, or to get back to our tutorial goal here, the <strong>Path-Chain</strong> which includes the <em>timeout</em>-key to which our promise resolves to.
We have also included a <em>id</em> into our message-object which we use when we resolve the promise. Thats not only a good thing for the Viewengine (React needs a <code class="code">key={}</code> for rendering lists for internal optimisations) but also for our <em>removeToast(...)</em> method which we need to add as well to our <em>./src/index.js</em>:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> <span class="token function" >removeToast</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>input<span class="token punctuation" >,</span> state<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>

  <span class="token keyword" >let</span> res1 <span class="token operator" >=</span> state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token string" >'toast.messages'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >filter</span><span class="token punctuation" >(</span><span class="token keyword" >function</span><span class="token punctuation" >(</span>msg<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> msg<span class="token punctuation" >.</span>id <span class="token operator" >===</span> input<span class="token punctuation" >.</span>id
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
  <span class="token keyword" >let</span> res <span class="token operator" >=</span> state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token string" >'toast.messages'</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >filter</span><span class="token punctuation" >(</span><span class="token keyword" >function</span><span class="token punctuation" >(</span>msg<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
    <span class="token keyword" >return</span> <span class="token operator" >!</span><span class="token punctuation" >(</span>msg<span class="token punctuation" >.</span>id <span class="token operator" >===</span> input<span class="token punctuation" >.</span>id <span class="token operator" >||</span> <span class="token punctuation" >(</span>msg<span class="token punctuation" >.</span>grouped <span class="token operator" >&amp;&amp;</span> msg<span class="token punctuation" >.</span>timestamp <span class="token operator" >&lt;=</span> res1<span class="token punctuation" >[</span><span class="token number" >0</span><span class="token punctuation" >]</span><span class="token punctuation" >.</span>timestamp<span class="token punctuation" >)</span><span class="token punctuation" >)</span>
  <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
  state<span class="token punctuation" >.</span><span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'toast.messages'</span><span class="token punctuation" >,</span> res<span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">removeToast(..) will return a new array of messages which doesn&#39;t contain the toast which needs to be removed and also the grouped toasts if any. Your app is now ready to testdrive!</p>
<p class="paragraph">Congratulations! Now you know how to control your flow using <strong>Path</strong>. And if you need <strong>parallel Actions/Operators</strong>, well just add another array<strong>[]</strong> to the chain, thats it!</p>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="../contributors">Contributors</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.webpackbin.com">www.webpackbin.com</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.christianalfoni.com">www.christianalfoni.com</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://medium.com/p/5793c08db2cc">The story of Cerebral</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730">An unlikely success story</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral">Cerebral github repo</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://discord.gg/0kIweV4bd2bwwsvH">Discord chat</a></div></div></footer><script src="../js/scripts.min.js"></script></body></html>