<!DOCTYPE html><html class="ua_js_no"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Cerebral</title><script>(function(e,c){e[c]=e[c].replace(/(ua_js_)no/g,"$1yes");})(document.documentElement,"className");</script><link rel="stylesheet" href="../css/styles.min.css"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:700,500,400"/><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto+Mono"/><link rel="shortcut icon" href="../favicon.ico"/><meta name="viewport" content="width=device-width,maximum-scale=1,initial-scale=1,user-scalable=no"/><meta name="format-detection" content="telephone=no"/><link name="apple-mobile-web-app-capable" content="yes"/></head><body class="page page_layout_get-started"><div class="page__header"><div class="head-nav"><a class="link link__control head-nav__home i-bem" data-bem='{"link":{}}' role="link" href="../"></a></div></div><div class="page__content"><div class="wip">This documentation is about upcoming cerebral v2 which is currently is work in progress.<br/>Documentation might not always describe actual state of API.<br/>API itself could have some notable changes, though it shouldn't be critical.<br/>Feel free to contribute to docs by clicking Edit on Github link.</div><div class="row"><div class="row__col row__col_sw_24 row__col_lw_5 row__col_sol row__col_mol"><div class="side-nav"><div class="menu menu_theme_islands menu_size_xl menu_mode_radio-check menu__control i-bem" data-bem='{"menu":{}}' role="menu" tabindex="0"><div class="menu__group" role="group" aria-labelledby="uniq14787845638061216"><div class="menu__group-title" role="presentation" id="uniq14787845638061216">Get started</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/01_get-started"}}' role="menuitemradio" id="uniq14787845638061217" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/01_get-started.html">Get started</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/02_store-state"}}' role="menuitemradio" id="uniq14787845638061218" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/02_store-state.html">Store State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/03_render-state"}}' role="menuitemradio" id="uniq14787845638061219" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/03_render-state.html">Exposing State to the View</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/04_render-challenge"}}' role="menuitemradio" id="uniq14787845638061220" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/04_render-challenge.html">Render challenge</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/05_update-state"}}' role="menuitemradio" id="uniq14787845638061221" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/05_update-state.html">Update state (Signals)</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/06_using-chains"}}' role="menuitemradio" id="uniq14787845638061222" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/06_using-chains.html">Using chains</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/07_using-inputoutput"}}' role="menuitemradio" id="uniq14787845638061223" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/07_using-inputoutput.html">Input and custom Actions</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/08_customaction-challenge"}}' role="menuitemradio" id="uniq14787845638061224" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/08_customaction-challenge.html">Custom action challenge</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/09_using-async-actions"}}' role="menuitemradio" id="uniq14787845638061225" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/09_using-async-actions.html">Using simple async actions</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/10_using-paths"}}' role="menuitemradio" id="uniq14787845638061226" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/10_using-paths.html">Control flow using Path</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/11_async-challenge"}}' role="menuitemradio" id="uniq14787845638061227" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/11_async-challenge.html">Async Challenge</a></div><div class="menu-item menu-item_type_link menu-item_checked menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/12_compute_state"}}' role="menuitemradio" id="uniq14787845638061228" aria-checked="true"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/12_compute_state.html">Compute State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/13_providers"}}' role="menuitemradio" id="uniq14787845638061229" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/13_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/14_routing"}}' role="menuitemradio" id="uniq14787845638061230" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/14_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/15_routing_challenge"}}' role="menuitemradio" id="uniq14787845638061231" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/15_routing_challenge.html">Routing Challenge</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"get-started/16_refactoring_modules"}}' role="menuitemradio" id="uniq14787845638061232" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../get-started/16_refactoring_modules.html">Refactoring using Modules</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14787845638061233"><div class="menu__group-title" role="presentation" id="uniq14787845638061233">Concepts</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/01_the-architecture"}}' role="menuitemradio" id="uniq14787845638061234" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/01_the-architecture.html">The architecture</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/02_signals"}}' role="menuitemradio" id="uniq14787845638061235" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/02_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/03_composition"}}' role="menuitemradio" id="uniq14787845638061236" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/03_composition.html">Composition</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/04_namespacing"}}' role="menuitemradio" id="uniq14787845638061237" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/04_namespacing.html">Namespacing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"concepts/05_exposing-state"}}' role="menuitemradio" id="uniq14787845638061238" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../concepts/05_exposing-state.html">Exposing state</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14787845638061239"><div class="menu__group-title" role="presentation" id="uniq14787845638061239">Getting real</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/01_community-tools"}}' role="menuitemradio" id="uniq14787845638061240" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/01_community-tools.html">Community tools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/02_organizing"}}' role="menuitemradio" id="uniq14787845638061241" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/02_organizing.html">Organizing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_adding-providers"}}' role="menuitemradio" id="uniq14787845638061242" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_adding-providers.html">Adding providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/03_devtools"}}' role="menuitemradio" id="uniq14787845638061243" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/03_devtools.html">Devtools</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/05_compute-state"}}' role="menuitemradio" id="uniq14787845638061244" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/05_compute-state.html">Compute state</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/06_connecting-to-components"}}' role="menuitemradio" id="uniq14787845638061245" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/06_connecting-to-components.html">Connecting to components</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/07_routing"}}' role="menuitemradio" id="uniq14787845638061246" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/07_routing.html">Routing</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/08_constants"}}' role="menuitemradio" id="uniq14787845638061247" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/08_constants.html">Constants</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/09_server-side"}}' role="menuitemradio" id="uniq14787845638061248" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/09_server-side.html">Server side</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"getting-real/10_testing"}}' role="menuitemradio" id="uniq14787845638061249" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../getting-real/10_testing.html">Testing</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14787845638061250"><div class="menu__group-title" role="presentation" id="uniq14787845638061250">Migration</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"migration/01_start_migration"}}' role="menuitemradio" id="uniq14787845638061251" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../migration/01_start_migration.html">From 1.x to 2.x</a></div></div><div class="menu__group" role="group" aria-labelledby="uniq14787845638061252"><div class="menu__group-title" role="presentation" id="uniq14787845638061252">API</div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/01_controller"}}' role="menuitemradio" id="uniq14787845638061253" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/01_controller.html">Controller</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/02_state"}}' role="menuitemradio" id="uniq14787845638061254" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/02_state.html">State</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/03_signals"}}' role="menuitemradio" id="uniq14787845638061255" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/03_signals.html">Signals</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/04_modules"}}' role="menuitemradio" id="uniq14787845638061256" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/04_modules.html">Modules</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/05_operators"}}' role="menuitemradio" id="uniq14787845638061257" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/05_operators.html">Operators</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/06_providers"}}' role="menuitemradio" id="uniq14787845638061258" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/06_providers.html">Providers</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/07_connect"}}' role="menuitemradio" id="uniq14787845638061259" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/07_connect.html">Connect</a></div><div class="menu-item menu-item_type_link menu-item_theme_islands i-bem" data-bem='{"menu-item":{"val":"api/08_router"}}' role="menuitemradio" id="uniq14787845638061260" aria-checked="false"><a class="link link__control i-bem" data-bem='{"link":{}}' role="link" href="../api/08_router.html">Router</a></div></div></div></div></div><div class="row__col row__col_sw_24 row__col_lw_18 row__col_lo_1"><div class="page__edit"><a class="link link_theme_islands link__control i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral-website/blob/v3/content/get-started/12_compute_state.en.md">Edit on GitHub</a></div><h2 class="heading heading_lvl_2" id="12-compute-state">12: Compute State</h2>
<p class="paragraph"><code class="code">npm run ch11</code></p>
<p class="paragraph">Coming back to the challenge we did before. The solution we wanted you to go through was to use another action that just adds state values and save the result in a new state value.
We are speaking of this</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >function</span> addStars <span class="token punctuation" >(</span><span class="token punctuation" >{</span>state<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  state<span class="token punctuation" >.</span><span class="token keyword" >set</span><span class="token punctuation" >(</span><span class="token string" >'totalStarsCount'</span><span class="token punctuation" >,</span> state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token string" >'cerebralStarsCount'</span><span class="token punctuation" >)</span> <span class="token operator" >+</span> state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span><span class="token string" >'cerebralDebuggerStarsCount'</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
</code></pre>
<p class="paragraph">Hmmm...Now we always need to call addStars(...) before using the Result. We can do better!
Let us look at TotalStarsCount like it would be a View (think Database-Views or Components like we already use)
In our components we already used a pattern like:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span> connect <span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/react'</span>
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  value<span class="token punctuation" >:</span> <span class="token string" >'originalValue'</span>
<span class="token punctuation" >}</span>
<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p class="paragraph">That means that this view is dependent on the &#39;originalValue&#39; - State and it rerenders whenever that changes.
Well we have good news. It is high time to introduce <strong>Computeds</strong> which also makes use of <em>state-paths</em>. A <em>Computed</em> for this TotalStarsCount-Usecase could look like this:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> <span class="token punctuation" >{</span> Computed <span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral'</span>

<span class="token keyword" >export</span> <span class="token keyword" >const</span> getStars <span class="token operator" >=</span> <span class="token function" >Computed</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  cerebralStars<span class="token punctuation" >:</span> <span class="token string" >'cerebralStarsCount'</span><span class="token punctuation" >,</span>
  cerebralDebuggerStars<span class="token punctuation" >:</span> <span class="token string" >'cerebralDebuggerStarsCount'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token punctuation" >(</span><span class="token punctuation" >{</span>cerebralStars<span class="token punctuation" >,</span> cerebralDebuggerStars<span class="token punctuation" >}</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> cerebralStars <span class="token operator" >+</span> cerebralDebuggerStars
<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">Wow, this looks pretty similar like the components-pattern from before. And it is doing quite a similar thing. We can see that this <em>Computed</em> is depending on two State Values and just returns the Sum of those two.
Now whenever this <em>Computed</em> is accessed it is either using a cached value to return the result, or it will recalculate itself if one of the <em>state-paths</em> changed meanwhile (cerebralStarsCount or cerebralDebuggerStarsCount). Pretty cool! (Compare this to concepts in other MVC-frameworks which will possibly always recalculate the values or introduce complexity because of handling and comparing changes)</p>
<p class="paragraph">Let us finish this example. To do so please create a new folder named <em>./src/computeds</em> and save a file named <em>getStars.js</em> containing the snippet we just have looked at.</p>
<p class="paragraph">Then we would like to access our computeds from within our showToast-Factory. We already have a simple &quot;Convenience-Parser&quot; - there which extracts State-Values whenever a <em>@{...}</em> is found in the text.
To do the same for <em>Computed</em>-Values we just need to replace the existing parser part with:</p>
<pre><code class="code" class="lang-js"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
    <span class="token comment" spellcheck="true">// replace the @C{...} matches with current computed value</span>
    <span class="token keyword" >if</span> <span class="token punctuation" >(</span>msg<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
      <span class="token keyword" >let</span> reg <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >RegExp</span><span class="token punctuation" >(</span><span class="token regex" >/@C{.*?}/g</span><span class="token punctuation" >)</span>
      <span class="token keyword" >var</span> matches <span class="token operator" >=</span> msg<span class="token punctuation" >.</span><span class="token function" >match</span><span class="token punctuation" >(</span>reg<span class="token punctuation" >)</span>
      <span class="token keyword" >if</span> <span class="token punctuation" >(</span>matches<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        matches<span class="token punctuation" >.</span><span class="token function" >forEach</span><span class="token punctuation" >(</span>m <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
          <span class="token keyword" >let</span> cleanedPath <span class="token operator" >=</span> m<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token string" >'@C{'</span><span class="token punctuation" >,</span> <span class="token string" >''</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token string" >'}'</span><span class="token punctuation" >,</span> <span class="token string" >''</span><span class="token punctuation" >)</span>
          msg <span class="token operator" >=</span> msg<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span>m<span class="token punctuation" >,</span> state<span class="token punctuation" >.</span><span class="token function" >compute</span><span class="token punctuation" >(</span>computeds<span class="token punctuation" >[</span>cleanedPath<span class="token punctuation" >]</span><span class="token punctuation" >)</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
      <span class="token punctuation" >}</span>
      <span class="token comment" spellcheck="true">// replace the @{...} matches with current state value</span>
      reg <span class="token operator" >=</span> <span class="token keyword" >new</span> <span class="token class-name" >RegExp</span><span class="token punctuation" >(</span><span class="token regex" >/@{.*?}/g</span><span class="token punctuation" >)</span>
      matches <span class="token operator" >=</span> msg<span class="token punctuation" >.</span><span class="token function" >match</span><span class="token punctuation" >(</span>reg<span class="token punctuation" >)</span>
      <span class="token keyword" >if</span> <span class="token punctuation" >(</span>matches<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
        matches<span class="token punctuation" >.</span><span class="token function" >forEach</span><span class="token punctuation" >(</span>m <span class="token operator" >=</span><span class="token operator" >></span> <span class="token punctuation" >{</span>
          <span class="token keyword" >let</span> cleanedPath <span class="token operator" >=</span> m<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token string" >'@{'</span><span class="token punctuation" >,</span> <span class="token string" >''</span><span class="token punctuation" >)</span><span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span><span class="token string" >'}'</span><span class="token punctuation" >,</span> <span class="token string" >''</span><span class="token punctuation" >)</span>
          msg <span class="token operator" >=</span> msg<span class="token punctuation" >.</span><span class="token function" >replace</span><span class="token punctuation" >(</span>m<span class="token punctuation" >,</span> state<span class="token punctuation" >.</span><span class="token keyword" >get</span><span class="token punctuation" >(</span>cleanedPath<span class="token punctuation" >)</span><span class="token punctuation" >)</span>
        <span class="token punctuation" >}</span><span class="token punctuation" >)</span>
      <span class="token punctuation" >}</span>
    <span class="token punctuation" >}</span>
<span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span>
</code></pre>
<p class="paragraph">And don&#39;t forget to import our computed</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span>  <span class="token operator" >*</span> <span class="token keyword" >as</span> computeds  <span class="token keyword" >from</span> <span class="token string" >'./computeds/getStars'</span>
</code></pre>
<p class="paragraph">at the top of <em>./src/index.js</em></p>
<p class="paragraph">So our parser will now automatically replace <em>$C{...}</em> - placeholders with the current computed value.</p>
<p class="paragraph">Let us change our existing <em>starCountClicked</em> - Signal to make use of this new placeholder.</p>
<p class="paragraph">Just replace the last showToast(...) with:</p>
<pre><code class="code" class="lang-js"><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token punctuation" >.</span><span class="token function" >showToast</span><span class="token punctuation" >(</span><span class="token template-string" ><span class="token string" >`Total Stars @C{getStars}`</span></span><span class="token punctuation" >,</span> <span class="token number" >3000</span><span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">Now we can <strong>get rid</strong> off our addStars-Action. It is not needed anymore:</p>
<pre><code class="code" class="lang-js">addStars<span class="token punctuation" >,</span>
</code></pre>
<p class="paragraph">As you can see now we can access computeds from within actions. Thats great, but what about our components in the view?
<strong>Cerebral</strong> has you covered here as well. Let us output the computed result as well into our StarButtonCount-Component:</p>
<pre><code class="code" class="lang-js"><span class="token keyword" >import</span> React <span class="token keyword" >from</span> <span class="token string" >'react'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span> connect <span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'cerebral/react'</span>
<span class="token keyword" >import</span> <span class="token punctuation" >{</span> getStars <span class="token punctuation" >}</span> <span class="token keyword" >from</span> <span class="token string" >'../../computeds/getStars'</span>
<span class="token keyword" >export</span> <span class="token keyword" >default</span> <span class="token function" >connect</span><span class="token punctuation" >(</span><span class="token punctuation" >{</span>
  total<span class="token punctuation" >:</span> getStars
<span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token punctuation" >{</span>
  buttonClicked<span class="token punctuation" >:</span> <span class="token string" >'starCountClicked'</span>
<span class="token punctuation" >}</span><span class="token punctuation" >,</span> <span class="token keyword" >function</span> StarCountButton <span class="token punctuation" >(</span>props<span class="token punctuation" >)</span> <span class="token punctuation" >{</span>
  <span class="token keyword" >return</span> <span class="token punctuation" >(</span>
    <span class="token operator" >&lt;</span>div<span class="token operator" >></span>
      <span class="token operator" >&lt;</span>button onClick<span class="token operator" >=</span><span class="token punctuation" >{</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span> <span class="token operator" >=</span><span class="token operator" >></span> props<span class="token punctuation" >.</span><span class="token function" >buttonClicked</span><span class="token punctuation" >(</span><span class="token punctuation" >)</span><span class="token punctuation" >}</span> className<span class="token operator" >=</span><span class="token string" >'c-button c-button--brand c-button--block'</span><span class="token operator" >></span>
        Get Total Stars <span class="token keyword" >for</span> Cerebral and Cerebral <span class="token operator" >-</span> Debugger <span class="token punctuation" >(</span><span class="token punctuation" >{</span>props<span class="token punctuation" >.</span>total<span class="token punctuation" >}</span><span class="token punctuation" >)</span>
      <span class="token operator" >&lt;</span><span class="token operator" >/</span>button<span class="token operator" >></span>
    <span class="token operator" >&lt;</span><span class="token operator" >/</span>div<span class="token operator" >></span>
  <span class="token punctuation" >)</span>
<span class="token punctuation" >}</span>
<span class="token punctuation" >)</span>
</code></pre>
<p class="paragraph">Thats it for now for <em>Computeds</em>. Of course adding two simple state-values is just a very simple usecase. Basically you can transform state into any result.
Very powerful!</p>
<p class="paragraph">As you have seen up to now we can customize and introduce magic in <em>Actions</em> and even go a bit crazy using <em>Factories</em> (eg. showToast(...))</p>
<p class="paragraph">What now if you have a nice JS - Library which you would like to have introduced nicely into your action flow?</p>
<p class="paragraph">Well, refill your coffee or open up another drink and enjoy the next chapter introducing <strong>Providers</strong></p>
</div></div></div><footer class="footer page__footer"><div class="row"><div class="row__col row__col_sw_24 row__col_lw_6"><h4 class="footer__header">ORGANIZATION</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="../contributors">Contributors</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.webpackbin.com">www.webpackbin.com</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://www.christianalfoni.com">www.christianalfoni.com</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_3"><h4 class="footer__header">ARTICLES AND USEFUL LINKS</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="http://medium.com/p/5793c08db2cc">The story of Cerebral</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://gist.github.com/christianalfoni/b08a99faa09df054afe87528a2134730">An unlikely success story</a></div><div class="row__col row__col_sw_24 row__col_lw_6 row__col_lo_6"><h4 class="footer__header">HELP</h4><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://github.com/cerebral/cerebral">Cerebral github repo</a><a class="link link__control footer__link i-bem" data-bem='{"link":{}}' role="link" href="https://discord.gg/0kIweV4bd2bwwsvH">Discord chat</a></div></div></footer><script src="../js/scripts.min.js"></script></body></html>